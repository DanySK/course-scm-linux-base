<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
<title>Basi di Linux, parte prima</title>
<meta name="description" content="Corso Linux Base @SCM Group">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link rel="stylesheet" href="/course-scm-linux-base/reveal-js/dist/reset.css">
<link rel="stylesheet" href="/course-scm-linux-base/reveal-js/dist/reveal.css">
  <link rel="stylesheet" href="/course-scm-linux-base/css/custom-theme.min.709764803b5d42d50d1af57bff6502b9b1d3c58651bd7d733b333f24b00ed1ec.css" id="theme"><link rel="stylesheet" href="/course-scm-linux-base/highlight-js/solarized-dark.min.css">
<link rel="stylesheet" href="https://gitcdn.link/repo/DanySK/css-blur-animation/master/blur.css">
<link href="https://fonts.googleapis.com/css?family=Roboto Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oxygen Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Ubuntu Mono" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
<script src="https://kit.fontawesome.com/81ac037be0.js" crossorigin="anonymous"></script>
<script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>

  </head>
  <body>
    
    <div class="reveal">
      <div class="slides">
  

    <section><h1 id="basi-di-linux-parte-prima">BASI DI LINUX, PARTE PRIMA</h1>
<h2 id="danilo-pianini"><a href="mailto:danilo.pianini@unibo.it">Danilo Pianini</a></h2>
<h3 id="compiled-2025-10-24">Compiled 2025-10-24</h3>
</section><section>
<h2 id="il-sistema-operativo">Il sistema operativo</h2>
<p>Strato software che si occupa di gestire l’hardware,
la memoria, e i permessi,
permettendo l’esecuzione concorrente di più programmi.</p>
<p><img src="../images/structure.png" alt="../images/structure.png"></p>
<p>Tanenbaum, Modern Operating Systems 3 e, (c) 2008 Prentice-Hall, Inc. All rights reserved. 0-13-6006639</p>
</section><section>
<h2 id="il-sistema-operativo-come-mezzo-di-astrazione">Il sistema operativo come mezzo di astrazione</h2>
<p>Il sistema operativo nasconde i dettagli di basso livello
dell’hardware, fornendo un’interfaccia più semplice</p>
<p><img src="../images/ugly.png" alt="../images/ugly.png"></p>
<p>Tanenbaum, Modern Operating Systems 3 e, (c) 2008 Prentice-Hall, Inc. All rights reserved. 0-13-6006639</p>
</section><section>
<h2 id="kernel-space-e-user-space">Kernel space e user space</h2>
<p>I sistemi operativi moderni consentono due macro-livelli di esecuzione:</p>
<ul>
<li>in <strong>kernel mode</strong>, il software ha accesso diretto all’hardware e a tutte le risorse del sistema</li>
<li>in <strong>user mode</strong>, il software ha accesso limitato, e deve passare per delle apposite chiamate (system call) per accedere alle risorse</li>
</ul>
<p>Sistemi operativi diversi possono fare scelte diverse su cosa fa parte del kernel e cosa no.</p>
<ul>
<li>Nei sistemi a <em>microkernel</em>, il kernel contiene solo le funzionalità essenziali (scheduling, gestione memoria, comunicazione intra-processo), mentre tutto il resto (inclusi i device driver) eseguono in user mode.
<ul>
<li>Alta sicurezza (un errore in un driver non compromette il sistema).</li>
</ul>
</li>
<li>Nei sistemi <em>monolitici</em>, anche servizi accessori come i driver, il file system, e la rete eseguono in kernel mode
<ul>
<li>Maggiore efficienza (meno overhead per le system call).</li>
<li>Più difficile da mantenere e debuggare.</li>
</ul>
</li>
<li>Nei sistemi <em>ibridi</em>, solo alcuni servizi accessori eseguono in kernel mode (ad esempio solo i device driver, ma non la gestione della rete).</li>
</ul>
</section><section>
<h2 id="famiglie-di-sistemi-operativi">Famiglie di sistemi operativi</h2>
<p><img src="../images/OS_kernel_timeline.svg" alt="../images/OS_kernel_timeline.svg"></p>
</section><section>
<h2 id="unix-posix-linux-gnu-distribuzioni">UNIX, POSIX, Linux, GNU, distribuzioni</h2>
<p><strong>UNIX</strong> (da UNICS, “<strong>Un</strong>iplexed <strong>I</strong>nformation <strong>C</strong>omputing <strong>S</strong>ystem”) è un <em>sistema operativo</em> sviluppato negli anni ‘70 da AT&amp;T.</p>
<p><strong>POSIX</strong> (<strong>P</strong>ortable <strong>O</strong>perating <strong>S</strong>ystem <strong>I</strong>nterface)
è uno <em>standard</em> che definisce l’interfaccia di programmazione per sistemi operativi UNIX-like.
Sistemi operativi che rispettano POSIX sono detti <em>POSIX-compliant</em>
(ad esempio, Mac OS è POSIX-Compliant a partire dalla versione 10.5).</p>
<p><strong>Linux</strong> <i class="fa-brands fa-linux"></i> è un <em>kernel</em> (non un sistema operativo completo) sviluppato da Linus Torvalds nel 1991.</p>
<p><strong>GNU/Linux</strong> è l’insieme del kernel Linux e degli strumenti GNU (compilatore C, librerie, utility binarie, eccetera),
che <em>insieme costituiscono un sistema operativo</em>. Sebbene non certificato POSIX, aderisce in larga parte allo standard.</p>
<p>Una <strong>Distribuzione Linux</strong> (
<i class="fa-brands fa-ubuntu"></i>,
<i class="fa-brands fa-debian"></i>,
<i class="fa-brands fa-suse"></i>,
<i class="fa-brands fa-redhat"></i>,
<i class="fa-brands fa-centos"></i>,
<i class="fa-brands fa-fedora"></i>,
Arch,
Gentoo…
) è l’insieme di Linux, di strumenti di contorno (solitamente GNU o BusyBox), e di software aggiuntivo (gestore di pacchetti, ambiente desktop, eccetera) che viene distribuito come un’unità.</p>
</section><section>
<h2 id="filosofia-unix">Filosofia UNIX</h2>
<ul>
<li><em>“everything is a file” (or a process)</em></li>
<li>il <em>file system</em> è un albero</li>
<li>il sistema è fatto da tanti piccoli programmi che fanno <em>una cosa</em> sola, <em>bene</em></li>
<li>i programmi possono essere combinati mettendo l’output di uno come input di un altro (piping)</li>
<li>un <em>linguaggio di scripting</em> permette di combinare i programmi in workflow complessi o di comandare il sistema interattivamente tramite una <em>shell</em></li>
</ul>
</section><section>
<h2 id="permessi-unix">Permessi UNIX</h2>
<p>Le <em>risorse</em> (file e processi) sono associate a un <em>utente</em> e a un <em>gruppo</em>.</p>
<p>Sia utenti che gruppi sono identificati da un nome alfanumerico e da un identificativo numerico.</p>
<p>Gli accessi a <em>file</em> UNIX sono quindi regolati da tre tipi di permessi: <strong>lettura</strong>, <strong>scrittura</strong>, ed <strong>esecuzione</strong>.
Ciascuno di questi è associato a tre entità: <em>il proprietario</em> del file, <em>il gruppo proprietario</em>, e <em>tutti gli altri utenti</em>.</p>
<p>Esiste un utente detto <strong>root</strong> che ha accesso <em>totale</em> al sistema.</p>
</section><section>
<h2 id="il-file-system-unix">Il file system UNIX</h2>
<p>A differenza di <i class="fa-brands fa-windows"></i>,
UNIX non associa delle “lettere di unità” alle partizioni.</p>
<p>Il file system UNIX è <em>un unico albero</em>, con radice <code>/</code>,
vedremo poi in che modo possono essere gestiti più dispositivi senza costruire nuove radici.</p>
<p>I percorsi dei file sono separati da <code>/</code> (a differenza di <i class="fa-brands fa-windows"></i>, che usa <code>\</code>).</p>
<p>I percorsi dei file possono essere <em>assoluti</em> (partono da <code>/</code>) o <em>relativi</em> (partono dalla directory corrente).
Ad esempio, <code>/home/user/documents/file.txt</code> è un percorso assoluto, mentre <code>documents/file.txt</code> è un percorso relativo.</p>
<p>Nei percorsi UNIX, <code>.</code> rappresenta la directory corrente, e <code>..</code> rappresenta la directory padre.</p>
<p>I file il cui nome comincia con <code>.</code> sono considerati <em>nascosti</em>.</p>
<p>Il file system UNIX è <em>tipicamente case-sensitive</em>: <code>file.txt</code>, <code>File.txt</code>, e <code>FILE.TXT</code> sono tre file diversi
(mentre su <i class="fa-brands fa-windows"></i> sarebbero considerati lo stesso file).
Si noti che esistono eccezioni:
per ragioni di compatibilità, il file system di
<i class="fa-brands fa-apple"></i>
è case-insensitive di default.</p>
</section><section>
<h2 id="il-terminale">Il terminale</h2>
<p>Programma che permette di interagire con il S.O. mediante comandi impartiti in modalità testuale, usate:</p>
<ul>
<li>per <strong>automatizzare</strong> le operazioni</li>
<li>per <strong>velocizzare</strong> le operazioni (scrivere un comando è spesso molto più veloce di andare a fare click col mouse in giro per lo schermo)</li>
<li>per fare operazioni complesse con pochi semplici comandi</li>
<li>non tutti i software sono dotati di interfaccia grafica</li>
<li>alcune opzioni di configurazione del sistema operativo restano accessibili solo via linea di comando
<ul>
<li>(anche su <i class="fa-brands fa-windows"></i>: ad esempio i comandi per associare le estensioni ad un eseguibile)</li>
</ul>
</li>
</ul>
</section><section>
<h2 id="sistemi-nix-linux-macos-x-freebsd-minix"><i class="fa-brands fa-linux"></i><i class="fa-brands fa-apple"></i> Sistemi *nix (Linux, MacOS X, FreeBSD, Minix…)</h2>
<h3 id="nei-sistemi-unix-like-esistono-vari-tipi-di-interpreti-chiamati-shell">Nei sistemi UNIX-like esistono vari tipi di interpreti, chiamati shell</h3>
<p>Alcuni esempi</p>
<ul>
<li>Bourne shell (sh)
<ul>
<li>Prima shell sviluppata per UNIX (1977)</li>
</ul>
</li>
<li>C-Shell (csh)
<ul>
<li>Sviluppata da Bill Joy per BSD</li>
</ul>
</li>
<li>Bourne Again Shell (bash)
<ul>
<li>Parte del progetto GNU, è un super set di Bourne shell</li>
</ul>
</li>
<li>ZSH, Fish, e altri terminali di ultima generazione
<ul>
<li>Altamente personalizzabili</li>
<li>Molto flessibili</li>
<li>Autocompletamento avanzato e contestualità</li>
<li>ZSH è default su <i class="fa-brands fa-apple"></i>, seppur con configurazione minimale</li>
<li>La shell che vedrete sul sistema del docente è ZSH con configurazione personalizzata</li>
</ul>
</li>
</ul>
<p>Panoramica delle differenze: <a href="http://www.faqs.org/faqs/unix-faq/shell/shell-differences/">http://www.faqs.org/faqs/unix-faq/shell/shell-differences/</a></p>
</section><section>
<h2 id="sistemi-windows"><i class="fa-brands fa-windows"></i> Sistemi Windows</h2>
<p>L’interprete comandi storico è rappresentato dal programma <code>cmd.exe</code> (<code>C:\Windows\System32\cmd.exe</code>)</p>
<ul>
<li>Eredita sintassi e funzionalità della maggior parte dei comandi del vecchio MSDOS</li>
</ul>
<p>Versioni recenti hanno introdotto <strong>PowerShell</strong>, basato su .NET e C#</p>
<p>Da Windows 10 è possibile installare Linux dentro Windows usando <strong>Windows Subsystem for Linux (WSL2)</strong></p>
<ul>
<li>Può essere un modo ragionevole di avere shell Unix in ambiente Windows</li>
</ul>
</section><section>
<h2 id="manipolazione-di-base-del-file-system">Manipolazione di base del file system</h2>
<h3 id="directory-corrente-pwd">Directory corrente: <code>pwd</code></h3>
<p>All’apertura, e in qualunque momento, il terminale si trova in una <em>directory</em> (cartella) del file system.</p>
<p>Normalmente, alla sua apertura, si trova nella <em>home directory</em> dell’utente.</p>
<p>Possiamo sempre sapere in che directory ci troviamo con il comando <code>pwd</code> (print working directory).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> <span style="color:#204a87">pwd</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">/home/danysk/LocalProjects
</span></span></span></code></pre></div></section><section>
<h2 id="manipolazione-di-base-del-file-system-1">Manipolazione di base del file system</h2>
<h3 id="elencare-il-contenuto-della-directory-corrente-ls">Elencare il contenuto della directory corrente: <code>ls</code></h3>
<p>Il comando <code>ls</code> (list) permette di elencare il contenuto della directory corrente.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> ls
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">LICENSE     assets  config.toml  layouts        resources  shared-slides  themes
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">archetypes  build   content      renovate.json  scm.md     static
</span></span></span></code></pre></div><p>Di default, <em>omette i file nascosti</em>, che possono essere visualizzati con l’opzione <code>-a</code> (all).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> ls -a
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">.        .gitignore        LICENSE     config.toml    resources      themes
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">..       .gitmodules       archetypes  content        scm.md
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">.git     .hugo_build.lock  assets      layouts        shared-slides
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">.github  .mergify.yml      build       renovate.json  static
</span></span></span></code></pre></div><p>Notate che appaiono anche le directory <code>.</code> e <code>..</code> che rappresentano rispettivamente la directory corrente e la directory padre.</p>
</section><section>
<h2 id="manipolazione-di-base-del-file-system-2">Manipolazione di base del file system</h2>
<h3 id="visione-dettagliata-opzione--l-di-ls">Visione dettagliata: opzione <code>-l</code> di <code>ls</code></h3>
<p>L’opzione <code>-l</code> di <code>ls</code> mostra anche permessi, dimensione e data di ultima modifica di ogni elemento.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> ls -l
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">total 60
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-r--r--  1 danysk danysk 11344 Aug  5 11:19 LICENSE
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  2 danysk danysk  4096 Aug  5 11:19 archetypes
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  2 danysk danysk  4096 Aug  5 11:19 assets
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  8 danysk danysk  4096 Aug  5 11:58 build
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-r--r--  1 danysk danysk  1842 Aug  5 11:27 config.toml
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  3 danysk danysk  4096 Aug  5 11:58 content
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  4 danysk danysk  4096 Aug  5 11:19 layouts
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-r--r--  1 danysk danysk   124 Aug  5 11:19 renovate.json
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  3 danysk danysk  4096 Aug  5 11:45 resources
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-------  1 danysk danysk  2807 Aug  5 11:33 scm.md
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x 10 danysk danysk  4096 Aug  5 11:26 shared-slides
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  2 danysk danysk  4096 Aug  5 11:19 static
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  3 danysk danysk  4096 Aug  5 11:19 themes
</span></span></span></code></pre></div></section><section>
<h2 id="manipolazione-di-base-del-file-system-3">Manipolazione di base del file system</h2>
<h3 id="capire-i-permessi">Capire i permessi</h3>
<p>I permessi sono rappresentati da 10 caratteri, divisi in 4 gruppi:</p>
<ul>
<li>il <em>primo</em> carattere indica il <em>tipo</em> di file (<code>d</code>: directory, <code>-</code>: file, <code>l</code>: link simbolico)</li>
<li>i successivi <em>tre gruppi</em> di <em>tre caratteri</em> indicano i permessi per, rispettivamente, il proprietario, il gruppo, e tutti gli altri utenti</li>
</ul>

<div class="container w-100 m-0 p-0">
    <div class="row "><div class="col "><p><img src="../images/octal.svg" alt="../images/octal.svg"></p>
</div>
<div class="col "><p>Esempi:</p>
<ul>
<li><code>drwxr-xr-x</code> directory scrivibile da owner e visibile a tutti</li>
<li><code>-rw-------</code> file accessibile e modificabile solo da owner</li>
<li><code>-rwxr-xr-x</code> file eseguibile da tutti, modificabile da owner</li>
<li><code>-rwxrwxrwx</code> file eseguibile e modificabile da tutti</li>
</ul>
</div></div>
</div>
<p>I permessi sono anche detti <em>ottali</em>,
perché possono essere rappresentati come un numero in base 8
(cifre da zero a 7)
ottenuto concatenando i permessi dei tre gruppi.</p>
</section><section>
<h2 id="manipolazione-di-base-del-file-system-4">Manipolazione di base del file system</h2>
<h3 id="formato-ottale-dei-permessi">Formato ottale dei permessi</h3>

<div class="container w-100 m-0 p-0">
    <div class="row "><div class="col "><p><img src="../images/octal.svg" alt="../images/octal.svg"></p>
<p>Esempi:</p>
<ul>
<li><code>rw-------</code> $\Rightarrow$ <code>600</code></li>
<li><code>rwxr-xr-x</code> $\Rightarrow$ <code>755</code></li>
<li><code>rwxrwxrwx</code> $\Rightarrow$ <code>777</code></li>
<li><code>rw-r--r--</code> $\Rightarrow$ <code>644</code></li>
<li><code>rw-rw-rw-</code> $\Rightarrow$ <code>666</code></li>
</ul>
</div>
<div class="col "><table>
  <thead>
      <tr>
          <th>Permesso</th>
          <th>Valore ottale</th>
          <th>Valore binario</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>---</code></td>
          <td>0</td>
          <td>000</td>
      </tr>
      <tr>
          <td><code>--x</code></td>
          <td>1</td>
          <td>001</td>
      </tr>
      <tr>
          <td><code>-w-</code></td>
          <td>2</td>
          <td>010</td>
      </tr>
      <tr>
          <td><code>-wx</code></td>
          <td>3</td>
          <td>011</td>
      </tr>
      <tr>
          <td><code>r--</code></td>
          <td>4</td>
          <td>100</td>
      </tr>
      <tr>
          <td><code>r-x</code></td>
          <td>5</td>
          <td>101</td>
      </tr>
      <tr>
          <td><code>rw-</code></td>
          <td>6</td>
          <td>110</td>
      </tr>
      <tr>
          <td><code>rwx</code></td>
          <td>7</td>
          <td>111</td>
      </tr>
  </tbody>
</table>
</div></div>
</div>
</section><section>
<h2 id="manipolazione-di-base-del-file-system-5">Manipolazione di base del file system</h2>
<h3 id="dimensioni-più-comprensibili-opzione--h-di-ls">Dimensioni più comprensibili: opzione <code>-h</code> di <code>ls</code></h3>
<p>L’opzione <code>-h</code> di <code>ls</code> mostra la dimensione in formato “human-readable”,
e funziona solo assieme a <code>-l</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> ls -lh
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">total 60K
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-r--r--  1 danysk danysk  12K Aug  5 11:19 LICENSE
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  2 danysk danysk 4,0K Aug  5 11:19 archetypes
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  2 danysk danysk 4,0K Aug  5 11:19 assets
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  8 danysk danysk 4,0K Aug  5 11:58 build
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-r--r--  1 danysk danysk 1,8K Aug  5 11:27 config.toml
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  3 danysk danysk 4,0K Aug  5 11:58 content
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  4 danysk danysk 4,0K Aug  5 11:19 layouts
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-r--r--  1 danysk danysk  124 Aug  5 11:19 renovate.json
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  3 danysk danysk 4,0K Aug  5 11:45 resources
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-------  1 danysk danysk 2,8K Aug  5 11:33 scm.md
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x 10 danysk danysk 4,0K Aug  5 11:26 shared-slides
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  2 danysk danysk 4,0K Aug  5 11:19 static
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  3 danysk danysk 4,0K Aug  5 11:19 themes
</span></span></span></code></pre></div></section><section>
<h2 id="manipolazione-di-base-del-file-system-6">Manipolazione di base del file system</h2>
<h3 id="dettagli-completi-ls--ahl">Dettagli completi: <code>ls -ahl</code></h3>
<p>le tre opzioni <code>a</code>, <code>l</code>, ed <code>h</code> possono (e solitamente sono) utilizzate all’unisono.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> ls -alh
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">total 88K
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  13 danysk danysk 4,0K Aug  5 12:05 .
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x 108 danysk danysk 4,0K Aug  5 11:19 ..
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x   9 danysk danysk 4,0K Aug  6 11:57 .git
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x   3 danysk danysk 4,0K Aug  5 11:19 .github
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-r--r--   1 danysk danysk   65 Aug  5 11:19 .gitignore
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-r--r--   1 danysk danysk  217 Aug  5 11:19 .gitmodules
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-r--r--   1 danysk danysk    0 Aug  5 11:45 .hugo_build.lock
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-r--r--   1 danysk danysk   24 Aug  5 11:19 .mergify.yml
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-r--r--   1 danysk danysk  12K Aug  5 11:19 LICENSE
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x   2 danysk danysk 4,0K Aug  5 11:19 archetypes
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x   2 danysk danysk 4,0K Aug  5 11:19 assets
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x   8 danysk danysk 4,0K Aug  5 11:58 build
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-r--r--   1 danysk danysk 1,8K Aug  5 11:27 config.toml
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x   3 danysk danysk 4,0K Aug  5 11:58 content
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x   4 danysk danysk 4,0K Aug  5 11:19 layouts
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-r--r--   1 danysk danysk  124 Aug  5 11:19 renovate.json
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x   3 danysk danysk 4,0K Aug  5 11:45 resources
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-------   1 danysk danysk 2,8K Aug  5 11:33 scm.md
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  10 danysk danysk 4,0K Aug  5 11:26 shared-slides
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x   2 danysk danysk 4,0K Aug  5 11:19 static
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x   3 danysk danysk 4,0K Aug  5 11:19 themes
</span></span></span></code></pre></div></section><section>
<h2 id="manipolazione-di-base-del-file-system-7">Manipolazione di base del file system</h2>
<h3 id="modifica-della-working-directory-cd">modifica della working directory: <code>cd</code></h3>
<p>È possibile spostarsi da una directory all’altra con il comando <code>cd</code> (change directory),
che prende un solo argomento: il percorso della directory di destinazione,
relativo o assoluto.
Se non viene specificato un percorso, <code>cd</code> porta alla home directory dell’utente corrente
(directory identificata anche dal simbolo speciale <code>~</code>).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> <span style="color:#204a87">pwd</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">/home/danysk/LocalProjects
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#8f5902">$</span> <span style="color:#204a87">cd</span> myFolder
</span></span><span style="display:flex;"><span><span style="color:#8f5902">$</span> <span style="color:#204a87">pwd</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">/home/danysk/LocalProjects/myFolder
</span></span></span></code></pre></div><p>Dato che <code>..</code> è la directory padre,
è possibile tornare alla directory precedente con <code>cd ..</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> <span style="color:#204a87">pwd</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">/home/danysk/LocalProjects/myFolder
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#8f5902">$</span> <span style="color:#204a87">cd</span> ..
</span></span><span style="display:flex;"><span><span style="color:#8f5902">$</span> <span style="color:#204a87">pwd</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">/home/danysk/LocalProjects
</span></span></span></code></pre></div></section><section>
<h2 id="manipolazione-di-base-del-file-system-8">Manipolazione di base del file system</h2>
<h3 id="aggiornamento-della-data-di-ultima-modifica-touch">Aggiornamento della data di ultima modifica: <code>touch</code></h3>
<p>Il comando <code>touch</code> permette di aggiornare la data di ultima modifica di un file al momento corrente.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> ls -l
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-r--r--  1 danysk danysk  12K Aug  5 11:19 LICENSE
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#8f5902">$</span> date
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">2024-08-06T14:25:21 CEST
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#8f5902">$</span> touch LICENSE
</span></span><span style="display:flex;"><span><span style="color:#8f5902">$</span> ls -l
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-r--r--  1 danysk danysk  12K Aug  6 14:25 LICENSE
</span></span></span></code></pre></div><p>L’utilizzo più comune di <code>touch</code>, però, è la creazione di un file vuoto: è sufficiente “toccare” un file che non esiste.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> ls -alh
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">total 8,0K
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  2 danysk danysk 4,0K Aug  6 14:29 .
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x 14 danysk danysk 4,0K Aug  6 14:28 ..
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#8f5902">$</span> touch mynewfile
</span></span><span style="display:flex;"><span><span style="color:#8f5902">$</span> ls -alh
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">total 8,0K
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  2 danysk danysk 4,0K Aug  6 14:29 .
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x 14 danysk danysk 4,0K Aug  6 14:28 ..
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">-rw-r--r--  1 danysk danysk    0 Aug  6 14:29 mynewfile
</span></span></span></code></pre></div></section><section>
<h2 id="manipolazione-di-base-del-file-system-9">Manipolazione di base del file system</h2>
<h3 id="costruzione-di-nuove-directory-mkdir">Costruzione di nuove directory: <code>mkdir</code></h3>
<p>Il comando <code>mkdir</code> (make directory) permette di creare una nuova directory.
Prende in ingresso un solo argomento: il percorso della directory da creare.</p>
<p>Il comando è in grado di creare anche directory annidate, se viene specificata l’opzione <code>-p</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> ls -alh
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">total 8,0K
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  2 danysk danysk 4,0K Aug  6 14:30 .
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x 14 danysk danysk 4,0K Aug  6 14:28 ..
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#8f5902">$</span> mkdir ciao
</span></span><span style="display:flex;"><span><span style="color:#8f5902">$</span> mkdir -p pippo/pluto/paperino
</span></span><span style="display:flex;"><span><span style="color:#8f5902">$</span> ls -alh
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">total 16K
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  4 danysk danysk 4,0K Aug  6 14:32 .
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x 14 danysk danysk 4,0K Aug  6 14:28 ..
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  2 danysk danysk 4,0K Aug  6 14:32 ciao
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  3 danysk danysk 4,0K Aug  6 14:32 pippo
</span></span></span></code></pre></div></section><section>
<h2 id="manipolazione-di-base-del-file-system-10">Manipolazione di base del file system</h2>
<h3 id="copia-di-file-e-directory-cp">Copia di file e directory: <code>cp</code></h3>
<p>Il comando <code>cp</code> (copy) permette di copiare file e directory.
Prende due argomenti: il percorso del file o della directory da copiare, e il percorso di destinazione.
Nel caso in cui si voglia copiare una directory, è necessario specificare l’opzione <code>-r</code> (recursive).</p>
<h3 id="rimozione-di-file-e-directory-rm">Rimozione di file e directory: <code>rm</code></h3>
<p>Il comando <code>rm</code> (remove) permette di rimuovere file e directory.
Prende un numero arbitrario di argomenti, e li rimuove.
Per rimuovere una directory ed i suoi contenuti, è necessario specificare l’opzione <code>-r</code> (recursive).</p>
<h3 id="rinominare-spostare-file-e-directory-mv">Rinominare (spostare) file e directory: <code>mv</code></h3>
<p>Il comando <code>mv</code> (move) permette di rinominare file e directory
(equivalente a spostarli in un’altra posizione).
Prende due argomenti: il percorso del file o della directory da rinominare, e il percorso di destinazione.</p>
</section><section>
<h2 id="wildcards">Wildcards</h2>
<p>Le <em>wildcards</em> sono caratteri speciali che permettono di specificare insiemi di file o directory, indicando che al loro posto può essere sostituito un qualunque carattere.</p>
<ul>
<li><code>?</code> – un singolo carattere, escluso <code>/</code></li>
<li><code>*</code> – una sequenza di zero o più caratteri, escluso <code>/</code></li>
<li><code>**</code> – <strong>non standard</strong>: dipendentemente dalla shell,
potrebbe essere disattivata (è il caso di <code>bash</code> ed <code>sh</code>),
e quindi equivalente a <code>*</code>
(perché una sequenza di zero o più caratteri seguita da una sequenza di zero o più caratteri è essa stessa una sequenza di zero o più caratteri),
oppure indicare che nella sequenza è incluso il carattere <code>/</code>,
ossia che la ricerca avviene ricorsivamente (è il caso di <code>zsh</code>).</li>
</ul>
</section><section>
<h2 id="strumenti-di-base-del-terminale">Strumenti di base del terminale</h2>
<h3 id="pulizia-dello-schermo-clear">Pulizia dello schermo: <code>clear</code></h3>
<p>Il comando <code>clear</code> permette di pulire il terminale, spostando in alto la schermata.</p>
<h3 id="storia-dei-comandi-history-e-ricerca-ctrlr">Storia dei comandi: <code>history</code> e ricerca: <kbd>Ctrl</kbd><kbd>R</kbd></h3>
<p>Le shell UNIX mantengono una storia dei comandi eseguiti.
Consultare la storia è molto utile,
consente di richiamare velocemente comandi eseguiti in precedenza.
Ciascuna shell salva la storia per ogni utente su un file nascosto nella home directory (<code>.bash_history</code> per <code>bash</code>, <code>.zhistory</code> per <code>zsh</code>).</p>
<p>Indipendentemente da quale file la contiene,
la storia può essere visualizzata con il comando <code>history</code>.</p>
<p>Inoltre, è possibile cercare rapidamente nella storia con <kbd>Ctrl</kbd><kbd>R</kbd> (reverse search).
Gli ultimi comandi possono essere scorsi con
<kbd><i class="fa-solid fa-arrow-up"></i></kbd> (previous) e <kbd><i class="fa-solid fa-arrow-down"></i></kbd> (next).</p>
<p>I comandi possono essere modificati a piacimento, e lanciati con <kbd><!--?xml version="1.0" encoding="UTF-8"?--><svg width="1em" height="1em" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="#000000"><path d="M10.25 19.25L6.75 15.75L10.25 12.25" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M6.75 15.75H12.75C14.9591 15.75 16.75 13.9591 16.75 11.75V4.75" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
</kbd>.</p>
</section><section>
<h2 id="strumenti-di-base-del-terminale-1">Strumenti di base del terminale</h2>
<h3 id="copia-incolla-col-mouse">Copia-incolla col mouse</h3>
<p>Sugli emulatore di terminale moderni, è possibile copiare e incollare con il mouse:</p>
<ol>
<li>selezionare il testo usando il mouse, tasto sinistro</li>
<li>posizionare il cursore dove si vuole incollare usando la tastiera</li>
<li>premere il tasto centrale del mouse per incollare</li>
</ol>
<p><strong>ATTENZIONE</strong>: <kbd>Ctrl</kbd><kbd>C</kbd> e <kbd>Ctrl</kbd><kbd>V</kbd> <strong>non</strong> funzionano in terminale!
Specialmente, il primo fa tutt’altro, vedremo poi.
Molti emulatori di terminale supportano però il copia-incolla tramite tastiera usando:</p>
<ul>
<li><kbd>Ctrl</kbd><kbd>Shift</kbd><kbd>C</kbd> dopo aver selezionato il testo col mouse, e</li>
<li><kbd>Ctrl</kbd><kbd>Shift</kbd><kbd>V</kbd> per incollare.</li>
</ul>
</section><section>
<h2 id="standard-input-output-ed-error">Standard input, output, ed error</h2>
<p>I programmi UNIX comunicano con l’ambiente esterno attraverso tre canali standard,
di cui uno in input e due in output:</p>
<ul>
<li><strong>standard input</strong> (<code>stdin</code>), per comandi lanciati da terminale, di default è l’input che viene dato da tastiera al terminale dopo il lancio del programma</li>
<li><strong>standard output</strong> (<code>stdout</code>), per comandi lanciati da terminale, di default è il testo che appare sul terminale stesso</li>
<li><strong>standard error</strong> (<code>stderr</code>), usato per i messaggi di errore; di default configurato come standard errror (stampa a terminale)</li>
</ul>
<h3 id="teletypewriter-il-terminale-come-file">Teletypewriter: il terminale come file</h3>
<p>In realtà, i tre canali sono <em>file</em>:
poiché il terminale stesso è modellato come <em>device file</em>
(d’altronde, in UNIX, tutto è un file o un processo).
Il file che rappresenta il terminale può essere recuperato col comando <code>tty</code> (teletype),
e su <i class="fa-brands fa-linux"></i> è tipicamente <code>/dev/pts/N</code> (con <code>N</code> numero intero positivo che rappresenta l’identificativo del terminale).</p>
<p>Di default, <code>stdin</code>, <code>stdout</code> e <code>stderr</code> sono associati al device file del terminale che li ha lanciati.</p>
</section><section>
<h2 id="standard-input-output-ed-error-1">Standard input, output, ed error</h2>
<h3 id="redirezione-base">Redirezione base</h3>
<p>Attraverso la <em>redirezione</em> è possibile far puntare i canali a file diversi da quello originale:</p>
<ul>
<li><code>&gt;</code> redirige <code>stdout</code> verso l’inizio di un file (ossia, lo sovrascrive)</li>
<li><code>&gt;&gt;</code> redirige <code>stdout</code> verso la fine di un file (ossia, aggiunge elementi in coda)</li>
<li><code>&lt;</code> redirige <code>stdin</code> da un file</li>
</ul>
<h3 id="redirezione-di-stream-specifici">Redirezione di stream specifici</h3>
<p>Abbiamo visto che <code>&gt;</code> e <code>&gt;&gt;</code> redirigono <code>stdout</code>,
ma come possiamo redirigere <code>stderr</code>?</p>
<p>In realtà, l’operatore di redirezione <code>&gt;</code> è un’abbreviazione per <code>1&gt;</code>: la redirezione comincia con il numero del file descriptor dello stream da ridirezionare.
Ognuno degli stream standard ha un file descriptor associato:</p>
<ul>
<li><code>0</code> per <code>stdin</code></li>
<li><code>1</code> per <code>stdout</code></li>
<li><code>2</code> per <code>stderr</code></li>
</ul>
<p>Dunque <code>0&lt;</code> equivale a <code>&lt;</code>, <code>1&gt;</code> equivale a <code>&gt;</code>, e <code>2&gt;</code> redirige <code>stderr</code>.</p>
<p>Se si volesse che un comando salvasse i messaggi di errore su error.log, e i messaggi di output su output.log, si potrebbe fare così:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#000;font-style:italic">my_command &gt; output.log 2&gt; error.log
</span></span></span></code></pre></div></section><section>
<h2 id="standard-input-output-ed-error-2">Standard input, output, ed error</h2>
<h3 id="redirezione-unione">Redirezione unione</h3>
<p>L’operatore <code>&gt;&amp;</code> permette di unire assieme due canali di output,
redirezionandone uno su un altro.</p>
<p>È possibile, ad esempio, redirigere <code>stderr</code> verso <code>stdout</code> con <code>2&gt;&amp;1</code>,
ad esempio perché si vuole che entrambi appaiano in un solo file di log:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#000;font-style:italic">my_command &gt; output.log 2&gt;&amp;1
</span></span></span></code></pre></div><p>diversamente, lo stream di errore resterebbe agganciato al device file del terminale!</p>
<h3 id="piping">Piping</h3>
<p>L’operatore <code>|</code> permette di concatenare due comandi, facendo sì che l’output di uno diventi l’input dell’altro.</p>
<p>Scrivendo, ad esempio, <code>ls | my_command</code>, l’output di <code>ls</code> diventa l’input di <code>my_command</code>, come se l’avessimo avviato ed avessimo messo in input la stringa prodotta da <code>ls</code>.</p>
<p><em>Nota</em>: <code>|</code> collega input e output, non passa degli argomenti!</p>
</section><section>
<h2 id="interazione-con-la-shell">Interazione con la shell</h2>
<h3 id="stampa-di-un-messaggio-echo">Stampa di un messaggio: <code>echo</code></h3>
<p>Il comando <code>echo</code> permette di stampare un messaggio a schermo.
Prende un numero arbitrario di argomenti, e li stampa separati da uno spazio.</p>
<p>Il comando è molto utile per inizializzare file con un certo contenuto, oppure per aggiungere un messaggio a un file di log.</p>
<h3 id="concatenazione-di-file-cat">Concatenazione di file: <code>cat</code></h3>
<p>Il comando <code>cat</code> (concatenate) permette di concatenare file.
Prende un numero arbitrario di argomenti, e li restituisce concatenati in uscita.</p>
<p>Il comando è molto utile per visualizzare il contenuto di un file.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> <span style="color:#204a87">echo</span> <span style="color:#4e9a06">"Hello, world!"</span> &gt; hello.txt
</span></span><span style="display:flex;"><span><span style="color:#8f5902">$</span> cat hello.txt
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Hello, world!
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#8f5902">$</span> <span style="color:#204a87">echo</span> <span style="color:#4e9a06">"Hello, world! 2"</span> &gt;&gt; hello.txt
</span></span><span style="display:flex;"><span><span style="color:#8f5902">$</span> cat hello.txt
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Hello, world!
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Hello, world! 2
</span></span></span></code></pre></div></section><section>
<h2 id="interazione-con-la-shell-1">Interazione con la shell</h2>
<h3 id="paginazione-di-un-file-less">Paginazione di un file: <code>less</code></h3>
<p>Il comando <code>less</code> permette di visualizzare un file a schermo, paginato, ossia,
mostrando una pagina alla volta e permettendo di scorrere avanti e indietro.</p>
<p>Si esce dalla modalità di visualizzazione premendo <kbd>Q</kbd>.</p>
<h3 id="intestazione-di-un-file-head">Intestazione di un file: <code>head</code></h3>
<p>Il comando <code>head</code> permette di visualizzare le prime 10 righe di un file.</p>
<p>Il comportamento può essere modificato con l’opzione <code>-n</code>, che permette di specificare il numero di righe da visualizzare.</p>
<h3 id="coda-di-un-file-tail">Coda di un file: <code>tail</code></h3>
<p>Il comando <code>tail</code> permette di visualizzare le ultime 10 righe di un file.</p>
<p>Anche in questo caso, il comportamento può essere modificato con l’opzione <code>-n</code>.</p>
<p>Inoltre, <code>tail</code> permette di “seguire” un file,
ossia di visualizzare le righe che vengono aggiunte in tempo reale.
La modalità “fetch” di <code>tail</code> è attivata con l’opzione <code>-f</code>.</p>
</section><section>
<h2 id="analisi-e-ricerca-nel-file-system">Analisi e ricerca nel file system</h2>
<h3 id="dimensione-di-una-directory-du">Dimensione di una directory: <code>du</code></h3>
<p>Il comando <code>du</code> (disk usage) permette di calcolare la dimensione di una directory e dei suoi contenuti.</p>
<p>Prende un numero arbitrario di argomenti, e restituisce la dimensione di ciascuno di essi.</p>
<p>L’opzione <code>-h</code> permette di visualizzare la dimensione in formato “human-readable”.</p>
<h3 id="ricerca-di-file-e-directory-find">Ricerca di file e directory: <code>find</code></h3>
<p>Il comando <code>find</code> permette di cercare file nel file system.</p>
<p>Prende un numero arbitrario di argomenti, e restituisce i file che soddisfano i criteri di ricerca specificati.</p>
<p>L’opzione <code>-name</code> permette di cercare file per nome.</p>
<p>L’opzione <code>-type</code> permette di cercare file per tipo.</p>
<h4 id="esempi">Esempi</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> find /home/utente -type f -name <span style="color:#4e9a06">"documento.txt"</span> <span style="color:#8f5902;font-style:italic"># Cerca un file col nome esatto "documento.txt"</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902">$</span> find /home/utente -type d -name <span style="color:#4e9a06">"progetti"</span> <span style="color:#8f5902;font-style:italic"># Cerca una directory col nome esatto "progetti"</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902">$</span> find /home/utente -type f -name <span style="color:#4e9a06">"*.txt"</span> <span style="color:#8f5902;font-style:italic"># Cerca tutti i file con estensione .txt (si possono usare i glob!)</span>
</span></span></code></pre></div></section><section>
<h2 id="analisi-e-ricerca-nel-file-system-1">Analisi e ricerca nel file system</h2>
<h3 id="ricerca-del-file-che-implementa-un-comando-which">Ricerca del file che implementa un comando: <code>which</code></h3>
<p>Il comando <code>which</code> permette di trovare il percorso di un eseguibile.</p>
<p>Prende un numero arbitrario di argomenti,
e per ciascuno restituisce il percorso dell’eseguibile che implementa il comando specificato
(se esiste).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> which cat <span style="color:#204a87">echo</span> intellij-idea-ultimate-edition pippo
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">/usr/bin/cat
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">echo: shell built-in command
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">/usr/bin/intellij-idea-ultimate-edition
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">pippo not found
</span></span></span></code></pre></div></section><section>
<h2 id="struttura-del-file-system-linux">Struttura del file system Linux</h2>
<p><img src="../images/ROOT.svg" alt="ROOT.svg"></p>
</section><section>
<h2 id="collegamenti-simbolici">Collegamenti simbolici</h2>
<p>Un <em>collegamento simbolico</em> (o <em>link simbolico</em>) è un file speciale che punta ad un altro file o directory.</p>
<p>Il comportamento è analogo a quello di un collegamento in Windows (file <code>.lnk</code>), ma è più potente:</p>
<ul>
<li>è gestito a livello di file system, mentre su Windows i file <code>.lnk</code> sono tipicamente scorciatoie per il file manager</li>
<li>non ha obbligo di estensione, è un <em>alias</em> e non una <em>scorciatoia</em></li>
</ul>
<h3 id="creazione-di-un-collegamento-simbolico-ln--s">Creazione di un collegamento simbolico: <code>ln -s</code></h3>
<p>Il comando <code>ln</code> (link) permette di creare collegamenti simbolici.
L’opzione <code>-s</code> (symbolic) permette di creare un collegamento simbolico.</p>
<p>Sintassi: <code>ln -s file-target file-link</code> crea un nuovo collegamento simbolico <code>file-link</code> che punta a <code>file-target</code>.</p>
<p>Quando si utilizza <code>ls -l</code>,
i collegamenti simbolici sono riconoscibili dal fatto che il nome del file è preceduto da <code>-&gt;</code>.</p>
</section><section>
<h2 id="terminare-input-e-processi-da-terminale">Terminare input e processi da terminale</h2>
<p>Se un processo resta in attesa sul terminale,
i casi più comuni sono:</p>
<ol>
<li>il processo è in attesa di input</li>
<li>il processo è sospeso in una sleep</li>
<li>il processo è in un loop che non termina</li>
</ol>
<h3 id="inviare-una-end-of-file">Inviare una end-of-file</h3>
<p>Nel primo caso, si può inviare un carattere speciale detto
<code>EOF</code> (end-of-file) per terminare l’input.</p>
<p>Per farlo, premere <kbd>Ctrl</kbd><kbd>D</kbd></p>
<h3 id="inviare-un-segnale-sigint">Inviare un segnale <code>SIGINT</code></h3>
<p>Nel secondo e terzo caso, si può inviare un segnale di interruzione (<code>SIGINT</code>) che richiede al processo di terminare.</p>
<p>Il segnale si invia premendo <kbd>Ctrl</kbd><kbd>C</kbd></p>
</section><section>
<h2 id="filtri-unix">Filtri UNIX</h2>
<p>In UNIX, i processi che lavorano su input e producono output sono chiamati <em>filtri</em>.</p>
<p>Il loro utilizzo tipico è quello di essere usati in <em>catene</em>,
separate da <code>|</code> (pipe),
per trasformare l’output di un comando precedente.</p>
<h3 id="filtraggio-di-base-con-grep">Filtraggio di base con <code>grep</code></h3>
<p>Un esempio di filtro è <code>grep</code>, che permette di filtrare righe di testo in base a un pattern.</p>
<p><code>grep</code> prende un pattern da cercare in input, e restituisce le righe che contengono il pattern.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> cat commedia.txt <span style="color:#000;font-weight:bold">|</span> grep Caron
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">  E 'l duca lui: "Caron, non ti crucciare:
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">  Caron dimonio, con occhi di bragia,
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">e però, se Caron di te si lagna,
</span></span></span></code></pre></div><ul>
<li>L’opzione <code>-v</code> permette di invertire il filtro, mostrando le righe che non contengono il pattern.</li>
<li>L’opzione <code>-n</code> permette di mostrare il numero di riga.</li>
<li>L’opzione <code>-c</code> permette di mostrare il numero di occorrenze.</li>
</ul>
<p>Ad esempio, possiamo scoprire quante righe nel della Divina Commedia non contengono nè la lettera <code>s</code> nè la lettera <code>t</code>
(si noti che il comando è case-sensitive):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> grep -v s &lt; commedia.txt <span style="color:#000;font-weight:bold">|</span> grep -v t <span style="color:#000;font-weight:bold">|</span> grep -v S <span style="color:#000;font-weight:bold">|</span> grep -v T -c
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">559
</span></span></span></code></pre></div><p><code>grep</code> supporta il filtraggio utilizzando <a href="https://it.wikipedia.org/wiki/Espressione_regolare#Espressioni_regolari_tradizionali_di_UNIX">Espressioni Regolari (regex)</a>, che non copriamo in questo corso.</p>
</section><section>
<h2 id="filtri-unix-1">Filtri UNIX</h2>
<h3 id="trasformazione-di-output-in-argomenti-xargs">Trasformazione di output in argomenti: <code>xargs</code></h3>
<p>Il comando <code>xargs</code> permette di trasformare l’output di un comando in <em>argomenti</em> di un altro.</p>
<p>Per questo viene utilizzato spesso in combinazione con <code>find</code>.</p>
<h4 id="esempio">Esempio</h4>
<p>Stampa a schermo del contenuto di tutti i file che si chiamano info.log nella home directory dell’utente e nelle sue sottodirectory:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> find ~ -type f -name <span style="color:#4e9a06">"info.log"</span> <span style="color:#000;font-weight:bold">|</span> xargs cat
</span></span></code></pre></div></section><section>
<h2 id="esercizio">Esercizio</h2>
<p>Data una directory in <code>/log/my_app</code> con struttura non nota,
stampare tutte le righe di tutti i file <code>.log</code> che contengono la parola <code>ERROR</code>.</p>


<span class="fragment ">
  <p>Suggerimento: usare <code>find</code> e <code>cat</code> con <code>grep</code>.</p>

</span>



<span class="fragment ">
  <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> find /log/my_app -type f -name <span style="color:#4e9a06">"*.log"</span> <span style="color:#000;font-weight:bold">|</span> xargs cat <span style="color:#000;font-weight:bold">|</span> grep ERROR
</span></span></code></pre></div>
</span>

</section><section>
<h2 id="manualistica-e-informazioni">Manualistica e informazioni</h2>
<p>Ricordarsi a memoria comandi e opzioni è difficile,
specialmente quando non vengono utilizzati quotidianamente.</p>
<p>Per questo, è importante sapere come ottenere informazioni sui comandi e sulle opzioni.
Fortunatamente, UNIX ha un sistema di manualistica integrato.</p>
<h3 id="cosa-fa-un-comando-whatis">Cosa fa un comando? <code>whatis</code></h3>
<p>Il comando <code>whatis</code> permette di ottenere una descrizione molto breve di un comando.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> whatis ls
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">ls (1)               - list directory contents
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#8f5902">$</span> whatis whatis
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">whatis (1)           - display one-line manual page descriptions
</span></span></span></code></pre></div><h3 id="manuale-completo-man">Manuale completo: <code>man</code></h3>
<p>Il comando <code>man</code> permette di visualizzare il manuale completo di un comando.</p>
<h3 id="ricerca-di-comandi-apropos">Ricerca di comandi: <code>apropos</code></h3>
<p>Data una parola chiave, il comando <code>apropos</code> permette di cercare comandi che la contengono
(cercando nei titoli dei manuali).</p>
</section><section>
<h2 id="utenti-gruppi-e-permessi">Utenti, gruppi, e permessi</h2>
<p>Come abbiamo visto,
in UNIX ogni file e processo ha un utente “owner”,
ed ogni file e directory ha, in aggiunta dei permessi di lettura, scrittura, ed esecuzione
per possessore, gruppo possessore, e per tutti gli altri.</p>
<p>Riuscire a manipolare gruppi, utenti, e permessi è quindi fondamentale per gestire un sistema UNIX.</p>
<h3 id="chi-è-loggato-who">Chi è loggato? <code>who</code></h3>
<p>Il comando <code>who</code> permette di ottenere la lista degli utenti loggati nel sistema.</p>
<h3 id="cambiare-il-possessore-di-un-file-chown">Cambiare il possessore di un file: <code>chown</code></h3>
<p>Il comando <code>chown</code> (change owner) permette di cambiare il possessore di un file.</p>
<p>L’opzione <code>-R</code> permette di cambiare il possessore di una directory e di tutti i suoi contenuti.</p>
<p>Utilizzo: <code>chown [opzioni] nuovo_possessore file</code></p>
</section><section>
<h2 id="utenti-gruppi-e-permessi-1">Utenti, gruppi, e permessi</h2>
<h3 id="cambiare-permessi-chmod">Cambiare permessi: <code>chmod</code></h3>

<div class="container w-100 m-0 p-0">
    <div class="row "><div class="col "><p>Abbiamo visto in precedenza come sono strutturati i permessi di un file, e ne abbiamo visto la rappresentazione <em>ottale</em>.</p>
<p>Il comando <code>chmod</code> (change mode) permette di cambiare questi permessi (ammesso che l’utente abbia diritti di scrittura sul file in esame).</p>
</div>
<div class="col "><p><img src="../images/octal.svg" alt="../images/octal.svg"></p>
</div></div>
</div>
<p>Utilizzo: <code>chmod [opzioni] permessi_ottali file</code></p>
<p>L’opzione <code>-R</code> permette di cambiare i permessi di una directory e di tutti i suoi contenuti.</p>
<p><strong>NOTA:</strong> per le cartelle, il permesso di esecuzione è necessario per poterla attraversare.</p>
<h4 id="esempi-1">Esempi:</h4>
<ul>
<li>Rendere un file eseguibile da chiunque: <code>chmod 777 file</code></li>
<li>Rendere un file eseguibile da tutti e scrivibile solo da owner: <code>chmod 755 file</code></li>
<li>Rendere il file leggibile e scrivibile solo da owner: <code>chmod 600 file</code></li>
</ul>
</section><section>
<h2 id="utenti-gruppi-e-permessi-2">Utenti, gruppi, e permessi</h2>
<h3 id="privilege-escalation-sudo">Privilege escalation: <code>sudo</code></h3>
<p>Il comando <code>sudo</code> (superuser do) permette di eseguire un comando come un altro utente (di default, <code>root</code>).</p>
<p>Perché un utente possa usare <code>sudo</code>, deve essere incluso nel file <code>/etc/sudoers</code> (o in un file incluso da esso).</p>
<p>A meno che non sia configurato diversamente in <code>/etc/sudoers</code>, <code>sudo</code> richiede la password dell’utente corrente.</p>
<p>È possibile anche lanciare un terminale come utente <code>root</code> con <code>sudo -i</code>.</p>
<p>Da questo momento, negli specchietti col codice il simbolo <code>$</code> indicherà comandi lanciati da un utente normale,
mentre <code>#</code> indicherà che il comando è eseguito come <code>root</code>
(e quindi o è premesso da <code>sudo</code>, oppure è eseguito in un terminale privilegiato).</p>
</section><section>
<h2 id="utenti-gruppi-e-permessi-3">Utenti, gruppi, e permessi</h2>
<h3 id="creare-un-nuovo-utente-useradd">Creare un nuovo utente: <code>useradd</code></h3>
<p>Il comando <code>useradd</code> permette di creare un nuovo utente.
Utilizzo: <code>useradd [opzioni] nome_utente</code></p>
<p>L’opzione <code>-m</code> permette di creare la home directory per l’utente, copiandola da <code>/etc/skel</code>.</p>
<p>L’opzione <code>-G</code> permette di aggiungere l’utente a uno o più gruppi, separati da <code>,</code> (senza spazi).</p>
<p>L’opzione <code>-s</code> permette di specificare la shell di default per l’utente.</p>
<h4 id="esempio-1">Esempio:</h4>
<p>Creazione di un utente <code>pluto</code>, appartenente ai gruppi
<code>lp</code> (stampanti),
<code>audio</code> (audio),
<code>docker</code> (uso di Docker),
e <code>wheel</code> (amministratori),
con shell di default <code>bash</code>
e home directory popolata a partire dal contenuto di <code>/etc/skel</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">#</span> useradd -m -G lp,audio,docker,wheel -s /bin/bash pluto
</span></span></code></pre></div></section><section>
<h2 id="utenti-gruppi-e-permessi-4">Utenti, gruppi, e permessi</h2>
<h3 id="settare-o-cambiare-la-password-di-un-utente-passwd">Settare o cambiare la password di un utente: <code>passwd</code></h3>
<p>Alla creazione, un utente non ha una password,
il che significa che non può fare il login.</p>
<p>Per alcuni utenti “di servizio” (come <code>nobody</code> o <code>daemon</code>) questo è desiderabile,
ma per account che richiedono un effettivo login è necessario settare una password.</p>
<p>Il comando <code>passwd</code> permette di settare o cambiare la password di un utente.
Il comando prende un solo argomento opzionale,
che è il nome dell’utente di cui cambiare la password.
Se viene omesso, <code>passwd</code> cambia la password dell’utente corrente.</p>
<p>Per cambiare la password di un utente, è necessario essere <code>root</code> o l’utente stesso.</p>
<p><code>passwd</code> chiederà la vecchia password (se l’utente è diverso da <code>root</code>),
e poi chiederà due volte la nuova password,
cambiandola solo se le due corrispondono.</p>
</section><section>
<h2 id="utenti-gruppi-e-permessi-5">Utenti, gruppi, e permessi</h2>
<h3 id="impersonificare-un-utente-su">Impersonificare un utente: <code>su</code></h3>
<p>Il comando <code>su</code> (switch user) permette di impersonare un altro utente.</p>
<p>Il comando prende un solo argomento, che è il nome dell’utente da impersonare.
Se viene omesso, <code>su</code> impersona l’utente <code>root</code>.</p>
<p><code>su</code> chiederà la password dell’utente da impersonare,
a meno che l’utente corrente sia <code>root</code>,
quindi, aprirà un nuovo terminale con l’utente impersonato.</p>
<h3 id="chi-sono-whoami">Chi sono? <code>whoami</code></h3>
<p>Dacchè è possibile impersonare altri utenti,
potrebbe essere non chiaro chi sia l’utente corrente.</p>
<p>Il comando <code>whoami</code> permette di ottenere il nome dell’utente corrente.</p>
</section><section>
<h2 id="utenti-gruppi-e-permessi-6">Utenti, gruppi, e permessi</h2>
<h3 id="creare-un-nuovo-gruppo-groupadd">Creare un nuovo gruppo: <code>groupadd</code></h3>
<p>Il comando <code>groupadd</code> permette di creare un nuovo gruppo.</p>
<p>Utilizzo: <code>groupadd nome_gruppo</code></p>
<h3 id="modifica-di-utenti-usermod">Modifica di utenti: <code>usermod</code></h3>
<p>Il comando <code>usermod</code> permette di modificare le proprietà di un utente.</p>
<p>Utilizzo: <code>usermod [opzioni] nome_utente</code></p>
<p>Le opzioni sono simili a quelle di <code>useradd</code>.</p>
<p>Per <em>aggiungere</em> gruppi all’utente, si può usare l’opzione <code>-aG</code>: usare <code>-G</code> invece sostituisce i gruppi esistenti con i nuovi.</p>
</section><section>
<h2 id="processi-segnali-e-loro-gestione">Processi, segnali, e loro gestione</h2>
<h3 id="identificatore-di-processo-pid">Identificatore di processo: PID</h3>
<p>Ogni processo in un sistema UNIX-like ha un identificatore numerico univoco, chiamato <strong>PID</strong> (Process IDentifier).</p>
<p>Il PID è un numero intero positivo, e viene assegnato in ordine crescente ad ogni processo che viene creato.</p>
<p>Il PID del processo corrente può essere ottenuto con il comando <code>echo $$</code>.</p>
<h3 id="stato-corrente-dei-processi-ps">Stato corrente dei processi: <code>ps</code></h3>
<p>Il comando <code>ps</code> (Process Status) permette di ottenere informazioni sui processi attivi.</p>
<p>Di default, <code>ps</code> mostra i processi attivi dell’utente corrente.</p>
<p><code>ps</code> senza opzioni mostra i processi dell’utente corrente associati al terminale su cui ps viene lanciato.</p>
<p><code>ps a</code> mostra i processi di tutti gli utenti.</p>
<p><code>ps u</code> mostra le informazioni in formato user-oriented.</p>
<p><code>ps x</code> mostra informazioni sui processi che non hanno un terminale di controllo (background, demoni, servizi)</p>
<p>Le tre opzioni vengono tipicamente combinate: <code>ps aux</code></p>
</section><section>
<h2 id="processi-segnali-e-loro-gestione-1">Processi, segnali, e loro gestione</h2>
<h3 id="segnali-in-unix">Segnali in UNIX</h3>
<p>UNIX consente ai processi di inviare segnali ad altri processi.</p>
<p>I segnali sono numerici, e ciascuno ha un significato specifico.</p>
<p>Quelli più rilevanti per noi sono:</p>
<ol>
<li><code>SIGINT</code> (2) – segnale che viene inviato alla pressione di <kbd>Ctrl</kbd><kbd>C</kbd>, che chiede al processo di terminare ordinatamente (simile a <code>SIGTERM</code>)</li>
<li><code>SIGTERM</code> (15) – segnale di terminazione, che chiede al processo di terminare ordinatamente</li>
<li><code>SIGKILL</code> (9) – segnale di terminazione forzata, che termina il processo immediatamente</li>
<li><code>SIGSTOP</code> (19) – segnale di pausa del processo, che lo sospende senza terminarlo</li>
<li><code>SIGCONT</code> (18) – segnale di continuazione del processo, che lo fa ripredere se attualmente sospeso</li>
</ol>
</section><section>
<h2 id="processi-segnali-e-loro-gestione-2">Processi, segnali, e loro gestione</h2>
<h3 id="invio-di-segnali-ai-processi-kill">Invio di segnali ai processi: <code>kill</code></h3>
<p>A dispetto del nome, il comando <code>kill</code> non “uccide” i processi, ma permette di inviare loro segnali.</p>
<p>Sintassi: <code>kill [opzioni] PID</code>.
Se nessuna opzione viene specificata, al processo target viene inviato un segnale <code>SIGTERM</code>.</p>
<p>Può essere inviato un segnale diverso sostituendo <code>SIG</code> con <code>-</code>, per esempio: <code>kill -KILL 6754</code> manda un <code>SIGKILL</code> al processo con PID 6754.</p>
<p>Con l’opzione <code>-s</code>, è possibile inviare un segnale in base al suo numero.
Il comando precedente è equivalente a <code>kill -s 9 6754</code></p>
<h3 id="invio-di-segnali-a-processi-usando-il-nome-killall">Invio di segnali a processi usando il nome: <code>killall</code></h3>
<p>Il comando <code>killall</code> è simile a <code>kill</code>, ma invece di prendere un PID,
prende un nome di processo e invia il segnale a tutti i processi che corrispondono a quel nome</p>
</section><section>
<h2 id="secure-shell">Secure shell</h2>
<p>Secure Shell (SSH) è un protocollo di rete che permette di accedere a un computer remoto in maniera sicura.</p>
<p>Permette di:</p>
<ul>
<li>aprire una shell remota, e quindi fare amministrazione da remoto
<ul>
<li>incluso l’inoltro di informazioni grafiche</li>
</ul>
</li>
<li>trasferire file in maniera sicura</li>
<li>costruire un tunnel sicuro per trasferire traffico non sicuro</li>
</ul>
<p>È composto di due parti:</p>
<ul>
<li>Un <em>server</em>, <code>sshd</code>, che ascolta di default sulla porta 22 (ma può essere configurato per usarne un’altra)</li>
<li>Un <em>client</em>, <code>ssh</code>, che permette di aprire una shell remota su un sistema dove <code>sshd</code> sia in esecuzione</li>
</ul>
<p>In questo corso base, ci concentreremo sul client.</p>
</section><section>
<h2 id="secure-shell-1">Secure shell</h2>
<h3 id="connessione-a-un-server-remoto-ssh">Connessione a un server remoto: <code>ssh</code></h3>
<p>Il comando <code>ssh</code> permette di aprire una shell remota su un server.</p>
<p>Sintassi: <code>ssh utente@indirizzo-server</code></p>
<ul>
<li>L’utente è opzionale. Se non specificato, viene usato il nome dell’utente corrente.</li>
<li>L’indirizzo del server può essere un nome di dominio o un indirizzo IP</li>
<li>Se il server remoto è in ascolto su una porta diversa dalla <code>22</code>, occorre specificarla con l’opzione <code>-p</code>
<ul>
<li>Esempio: <code>ssh -p 2222 utente@indirizzo-server</code></li>
</ul>
</li>
</ul>
<p>All’arrivo di una richiesta di apertura di una sessione,
il server tenterà di autenticare l’utente.</p>
<p>La configurazione del server può cambiare, normalmente i metodi di autenticazione sono:</p>
<ol>
<li>chiave pubblica/privata</li>
<li>password</li>
</ol>
<p>Il primo metodo è considerato, più sicuro, ma può essere meno pratico.</p>
</section><section>
<h2 id="secure-shell-2">Secure shell</h2>
<h3 id="crittografia-a-chiavi-asimmetriche">Crittografia a chiavi asimmetriche</h3>
<p>L’autenticazione a chiavi asimmetriche è un meccanismo di riconoscimento che si basa su due codici (chiavi):</p>
<ul>
<li>una <strong>chiave pubblica</strong>, che può essere <em>distribuita liberamente</em></li>
<li>una <strong>chiave privata</strong>, che deve essere mantenuta <em>segreta</em></li>
</ul>
<p>Il meccanismo funziona come segue:</p>
<ul>
<li>Un’informazione può essere cifrata con ciascuna delle due chiavi</li>
<li>L’informazione cifrata con una delle due chiavi può essere decifrata solo con l’<em>altra</em> chiave</li>
</ul>
<p>Utilizzando opportunamente le due chiavi, la crittazione asimmetrica consente di implementare:</p>
<ul>
<li>invio di messaggi firmati (autenticazione)</li>
<li>invio di messaggi segreti</li>
<li>invio di messaggi segreti e firmati</li>
</ul>
</section><section>
<h2 id="secure-shell-3">Secure shell</h2>
<h3 id="esempi-con-crittografia-a-chiavi-asimmetriche">Esempi con crittografia a chiavi asimmetriche</h3>
<p>Alcuni esempi, usando la notazione seguente:</p>
<ul>
<li><box-icon name="spreadsheet"></box-icon> rappresenta i dati non cifrati,</li>
<li><box-icon name="key" type="solid" rotate="45"></box-icon>
e
<box-icon name="key" flip="horizontal" rotate="180"></box-icon> rappresentano le chiavi pubblica e privata rispettivamente,</li>
<li>i simboli
<box-icon type="solid" name="lock-alt"></box-icon>
e
<box-icon name="lock-alt"></box-icon>
i dati cifrati con le medesime.</li>
</ul>
<p>Valgono le seguenti proprietà:</p>
<ul>
<li><box-icon name="spreadsheet"></box-icon> +
<box-icon name="key" type="solid" rotate="45"></box-icon> =
<box-icon type="solid" name="lock-alt"></box-icon>
<i class="fa-solid fa-right-long"></i>
<em>messaggio segreto</em> per il possessore della chiave <box-icon name="key" flip="horizontal" rotate="180"></box-icon></li>
<li><box-icon name="spreadsheet"></box-icon> +
<box-icon name="key" flip="horizontal" rotate="180"></box-icon> =
<box-icon name="lock-alt"></box-icon>
<i class="fa-solid fa-right-long"></i>
<em>messaggio firmato</em> dal possessore della chiave <box-icon name="key" flip="horizontal" rotate="180"></box-icon></li>
<li><box-icon type="solid" name="lock-alt"></box-icon> +
<box-icon name="key" flip="horizontal" rotate="180"></box-icon> =
<box-icon name="spreadsheet"></box-icon>
<i class="fa-solid fa-right-long"></i>
<em>decrittazione</em> di un messaggio segreto</li>
<li><box-icon name="lock-alt"></box-icon> +
<box-icon name="key" type="solid" rotate="45"></box-icon> =
<box-icon name="spreadsheet"></box-icon>
<i class="fa-solid fa-right-long"></i>
<em>verifica della firma</em> (chiunque può controllare )</li>
</ul>
<p>Si noti che utilizzando solo la chiave pubblica <box-icon name="key" type="solid" rotate="45"></box-icon>
è possibile mandare messaggi al possessore di <box-icon name="key" flip="horizontal" rotate="180"></box-icon>
e verificare che l’autore di un certo messaggio sia proprio il possessore di <box-icon name="key" flip="horizontal" rotate="180"></box-icon>,
ma <strong>non</strong> è possibile leggere messaggi crittati con <box-icon name="key" type="solid" rotate="45"></box-icon>:
la crittografia è quindi detta <strong>asimmetrica</strong>,
perché le due chiavi sono complementari, e l’unico che può fare tutte le operazioni è chi le possiede entrambe
(ossia, chi possiede la chiave privata <box-icon name="key" flip="horizontal" rotate="180"></box-icon>,
dato che <box-icon name="key" type="solid" rotate="45"></box-icon> è nota a tutti)</p>
</section><section>
<h2 id="secure-shell-4">Secure shell</h2>
<h3 id="configurazione-delle-chiavi-asimmetriche">Configurazione delle chiavi asimmetriche</h3>
<p>Lo strumento per generare le chiavi asimmetriche è <code>ssh-keygen</code>.</p>
<p><strong>Nota</strong>: qui si mostra la generazione di una chiave con impostazioni di default.
Per un uso sicuro, si consiglia di seguire le <a href="https://archive.is/3Pn0L">moderne pratiche di sicurezza</a>.</p>
<p>Una chiave di default può essere generata lanciando semplicemente <code>ssh-keygen</code>,
confermando i default proposti.
Se viene inserita una password, la chiave privata sarà cifrata e richiederà la password per essere utilizzata.
È possibile creare chiavi prive di password semplicemente non inserendola.</p>
<p>Al termine dell’operazione, la chiave pubblica <box-icon name="key" type="solid" rotate="45"></box-icon> sarà salvata in <code>~/.ssh/id_rsa.pub</code>.
Nella stessa cartella si troverà la chiave privata <box-icon name="key" flip="horizontal" rotate="180"></box-icon>, <code>~/.ssh/id_rsa</code>.</p>
<p>La chiave privata <strong>non va mai condivisa</strong>, mentre quella pubblica può essere distribuita agli amministratori dei sistemi cui dobbiamo avere accesso.</p>
<p>Per autorizzare una chiave SSH all’ingresso di un server, è sufficiente aggiungerla al file <code>~/.ssh/authorized_keys</code> <em>del server</em>
<br>
(va quindi fatta da qualcuno che abbia accesso alla macchina server con diritti amministrativi).</p>
<p>Una volta fatto, sarà possibile accedere al server senza alcuna password
(eccetto quella necessaria a decrittare la propria chiave privata, se è stata inserita in fase di configurazione).</p>
</section><section>
<h2 id="secure-shell-5">Secure shell</h2>
<h3 id="autenticazione-tramite-password">Autenticazione tramite password</h3>
<p>L’autenticazione tramite password non richiede alcuna configurazione.</p>
<p>Se l’autenticazione tramite chiavi, che viene tentata per prima perché più sicura,
non ha successo,
allora viene chiesto l’inserimento della password dell’utente remoto.</p>
<p>La password che va inserita è quella dell’utente remoto, esattamente come verrebbe chiesta se ci si loggasse direttamente sul server.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">[pluto@notebook ~]$</span> whoami
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">pluto
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#8f5902">[pluto@notebook ~]$</span> ssh pippo@my-server.my-domain.com
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Password: ******** # Password di pippo, non di pluto
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#8f5902">[pippo@server ~]$</span> whoami
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">pippo
</span></span></span></code></pre></div></section><section>
<h2 id="secure-shell-6">Secure shell</h2>
<h3 id="configurazione-di-ssh">Configurazione di SSH</h3>
<p>SSH ed il demone <code>sshd</code> sono configurabili tramite file di configurazione che si trovano in <code>/etc/ssh</code>.</p>
<ul>
<li><code>ssh_config</code> è il file di configurazione del client</li>
<li><code>sshd_config</code> è il file di configurazione del server</li>
</ul>
<p>I file sono ben commentati, e la configurazione di default è generalmente sufficiente per la maggior parte degli utilizzi.</p>
<p>Per modificare la configurazione, è necessario avere i diritti di amministratore.</p>
<h3 id="x-forwarding">X forwarding</h3>
<p>Se il server è configurato per supportarlo (impostazione disattivata di default),
è possibile lanciare programmi grafici remotamente e visualizzarli localmente.</p>
<p>Per farlo, si deve lanciare <code>ssh</code> con l’opzione <code>-X</code> o <code>-Y</code> (si raccomanda la seconda).</p>
<p><img src="../images/x11-forwarding.png" alt="../images/x11-forwarding.png"></p>
</section><section>
<h2 id="secure-shell-7">Secure shell</h2>
<h3 id="copia-di-file-tramite-ssh-scp">Copia di file tramite SSH: <code>scp</code></h3>
<p>Un utilizzo molto comune di SSH è la copia di file da e verso un server remoto
tramite il protocollo SFTP (Secure File Transfer Protocol).</p>
<p>Il comando <code>scp</code> (secure copy) permette di copiare file da e verso un server remoto
passando attraverso una connessione sicura SSH.</p>
<p>Sintassi: <code>scp [opzioni] file_origine file_destinazione</code></p>
<p>dove <code>file_origine</code> e <code>file_destinazione</code> possono essere:</p>
<ul>
<li>file locali (quindi percorsi assoluti o relativi) o</li>
<li>file remoti, con formato <code>utente@server:percorso</code>
<ul>
<li>In questo caso, <code>percorso</code> deve essere assoluto, oppure relativo a partire dalla home directory dell’utente remoto</li>
</ul>
</li>
</ul>
<h4 id="esercizio-1">Esercizio</h4>
<ol>
<li>Ispezionare localmente la configurazione sshd del server remoto <code>my-server.my-domain.com</code>,
dove sono configurati gli utenti <code>user</code> e <code>root</code>,
dei quali si conosce la password.
copiando localmente il file che la contiene.</li>
<li>Assumendo che la configurazione sia stata modificata, copiare il file modificato sul server remoto.</li>
</ol>


<span class="fragment ">
  <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> scp user@my-server.my-domain.com:/etc/ssh/sshd_config server_sshd_config
</span></span><span style="display:flex;"><span><span style="color:#8f5902">$</span> <span style="color:#8f5902;font-style:italic"># Modifica il file</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902">$</span> scp server_sshd_config root@my-server.my-domain.com:/etc/ssh/sshd_config
</span></span></code></pre></div>
</span>

<ul>
<li>

<span class="fragment ">
  Perché sono stati usati due utenti diversi?
</span>
</li>
<li>

<span class="fragment ">
  Cosa sarebbe successo se si fosse usato sempre <code>root</code>?
</span>
</li>
<li>

<span class="fragment ">
  Cosa sarebbe successo se si fosse usato <code>user</code> per entrambe le operazioni?
</span>
</li>
</ul>
</section><section>
<h2 id="secure-shell-8">Secure shell</h2>
<h3 id="client-grafico-multipiattaforma-per-sftp-filezilla">Client grafico multipiattaforma per SFTP: FileZilla</h3>
<p>FileZilla consente il trasferimento di file da e verso server SSH in modo grafico.
È gratuito ed open source, e funziona su <i class="fa-brands fa-windows"></i>, <i class="fa-brands fa-linux"></i>, e <i class="fa-brands fa-apple"></i>.</p>
<p><img src="../images/filezilla_snapshot.png" alt="filezilla_snapshot.png"></p>
</section><section>
<h2 id="secure-shell-9">Secure shell</h2>
<h3 id="filezilla-configurazione-di-un-accesso-a-server-sftp">FileZilla: configurazione di un accesso a server SFTP</h3>
<p><img src="../images/filezilla_sftp.png" alt="filezilla_sftp.png"></p>
</section><section>
<h2 id="bash-scripting">Bash scripting</h2>
<p>Il terminale è in realtà una Read-Eval-Print Loop (REPL) per il linguaggio di programmazione <code>bash</code>,
che significa che:</p>
<ol>
<li>è possibile scrivere script in <code>bash</code> e lanciarli da terminale</li>
<li>è possibile utilizzare istruzioni di programmazione (definizione di variabile, cicli, condizionali, ecc.) direttamente nel terminale</li>
</ol>
<h3 id="scripting-in-bash">Scripting in bash</h3>
<p>Uno <em>script</em> è un file di testo contenente una sequenza di comandi che possono essere eseguiti in sequenza.</p>
<p>La prima riga di uno script bash ben formato deve essere la <em>shebang line</em>,
che indica il percorso dell’interprete da usare per eseguire lo script.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#!/bin/bash
</span></span></span></code></pre></div><p>Si noti che, cambiando la shebang line, è possibile scrivere script in altri linguaggi, ad esempio Python, Ruby, Kotlin, eccetera.</p>
<ul>
<li><code>#!/usr/bin/env python</code></li>
<li><code>#!/usr/bin/env ruby</code></li>
<li><code>#!/usr/bin/env kotlin</code></li>
</ul>
<p>Perché sia eseguibile direttamente, lo script deve avere i permessi di esecuzione, che possono essere assegnati con</p>
<ul>
<li><code>chmod +x script_file</code></li>
</ul>
</section><section>
<h2 id="bash-scripting-1">Bash scripting</h2>
<h3 id="variabili">Variabili</h3>
<p>Le variabili in bash sono definite senza dichiarazione di tipo, e sono sempre stringhe.</p>
<p>Per assegnare un valore a una variabile, si usa l’operatore <code>=</code>, che va usato senza spazi:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#000">nome_variable</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">"valore"</span>
</span></span></code></pre></div><p>La variabile può essere letta prefiggendo al nome il simbolo <code>$</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> <span style="color:#204a87">echo</span> <span style="color:#000">$nome_variable</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">valore
</span></span></span></code></pre></div><p>I nomi di variabili possono contenere lettere, numeri, e <code>_</code>, ma non devono iniziare con un numero</p>
<ul>
<li>in altre parole, devono fare match con la RegEx <code>[a-zA-Z_][a-zA-Z0-9_]*</code></li>
</ul>
<p>Convenzionalmente, si usano nomi di variabili in maiuscolo per le <em>costanti</em> e in minuscolo per <em>variabili</em>.</p>
</section><section>
<h2 id="bash-scripting-2">Bash scripting</h2>
<h3 id="string-expansion-variabili">String expansion: variabili</h3>
<p>Le variabili possono essere interpolate (<em>espanse</em>) in stringhe con le doppie virgolette:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> <span style="color:#000">nome_variable</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">"valore"</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902">$</span> <span style="color:#204a87">echo</span> <span style="color:#4e9a06">"Il valore della variabile è </span><span style="color:#000">$nome_variable</span><span style="color:#4e9a06">"</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Il valore della variabile è valore
</span></span></span></code></pre></div><p>Al contrario, le singole virgolette non interpolano le variabili:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> <span style="color:#204a87">echo</span> <span style="color:#4e9a06">'Il valore della variabile è $nome_variable'</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Il valore della variabile è $nome_variable
</span></span></span></code></pre></div><p><strong>ATTENZIONE</strong>: l’espansione di una variabile non assegnata non è un errore
(comportamento modificabile),
ma la stringa vuota <code>''''</code>!</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> <span style="color:#204a87">echo</span> <span style="color:#4e9a06">"Il valore della variabile è </span><span style="color:#000">$nome_varbaile</span><span style="color:#4e9a06">"</span> <span style="color:#8f5902;font-style:italic"># Notare l'errore di battitura</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Il valore della variabile è
</span></span></span></code></pre></div><p>È possibile utilizzare le parentesi graffe per identificare il nome di una variabile ed evitare casi di ambiguità:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> <span style="color:#000">variabile</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">"prova"</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902">$</span> <span style="color:#204a87">echo</span> <span style="color:#4e9a06">"Stasera sono </span><span style="color:#4e9a06">${</span><span style="color:#000">variabile</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06">to"</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Stasera sono provato
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#8f5902">$</span> <span style="color:#204a87">echo</span> <span style="color:#4e9a06">"Stasera sono </span><span style="color:#000">$variabileto</span><span style="color:#4e9a06">"</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Stasera sono
</span></span></span></code></pre></div></section><section>
<h2 id="bash-scripting-3">Bash scripting</h2>
<p>In bash, è possibile interpolare come stringhe l’output di comandi e e di operazioni aritmetiche.</p>
<h3 id="command-output-expansion">Command output expansion</h3>
<p>Per eseguire un comando e usare il suo output come stringa, si usa la <em>command output expansion</em>,
che si ottiene racchiudendo il comando tra parentesi tonde:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> <span style="color:#204a87">echo</span> <span style="color:#4e9a06">"Oggi è </span><span style="color:#204a87;font-weight:bold">$(</span>date<span style="color:#204a87;font-weight:bold">)</span><span style="color:#4e9a06">"</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Oggi è Mon 25 Oct 2021 10:00:00 AM CEST
</span></span></span></code></pre></div><h3 id="arithmetic-expansion">Arithmetic expansion</h3>
<p>Per eseguire operazioni aritmetiche, si usa la <em>arithmetic expansion</em>,
che si ottiene racchiudendo l’operazione tra parentesi tonde e precedendo la parentesi aperta con <code>$((</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> <span style="color:#204a87">echo</span> <span style="color:#4e9a06">"2 + 2 fa </span><span style="color:#204a87;font-weight:bold">$((</span><span style="color:#0000cf;font-weight:bold">2</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#0000cf;font-weight:bold">2</span><span style="color:#204a87;font-weight:bold">))</span><span style="color:#4e9a06">"</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">2 + 2 fa 4
</span></span></span></code></pre></div><p><strong>NOTA:</strong> il design di queste operazioni è per numeri interi.
Sebbene <code>zsh</code> supporti operazioni in virgola mobile, <code>bash</code> ed <code>sh</code> non lo fanno.</p>
</section><section>
<h2 id="bash-scripting-4">Bash scripting</h2>
<h3 id="condizionali">Condizionali</h3>
<p>I condizionali in bash sono simili a quelli in altri linguaggi di programmazione.</p>
<p>La sintassi di base è:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">if</span> comandi<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">then</span> comando1<span style="color:#000;font-weight:bold">;</span> comando2<span style="color:#000;font-weight:bold">;</span> ...<span style="color:#000;font-weight:bold">;</span> comandoN<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">fi</span>
</span></span></code></pre></div><p>I <code>;</code> possono essere sostituiti da degli a capo negli script per rendere il codice più leggibile:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">if</span> condizione<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>    comando1
</span></span><span style="display:flex;"><span>    comando2
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    comandoN
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">fi</span>
</span></span></code></pre></div><p>La <code>condizione</code> deve essere un comando che restituisce un valore di uscita (exit status)
uguale a 0 per essere considerata vera</p>
<ul>
<li>si noti che è l’opposto di quello che succede in C, dove <code>0</code> è considerato falso e qualunque altro numero è vero.
Questo perché, per convenzione, lo stato di uscita <code>0</code> di un processo indica che il processo è terminato correttamente.</li>
</ul>
<p>Esistono due comandi built-in <code>true</code> e <code>false</code> che restituiscono rispettivamente 0 e 1.</p>
</section><section>
<h2 id="bash-scripting-5">Bash scripting</h2>
<h3 id="condizionali-1">Condizionali</h3>
<p>Prima di <code>fi</code>, è possibile inserire un blocco <code>else</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">if</span> comandi<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">fi</span>
</span></span></code></pre></div><p>È possibile concatenare più condizioni con <code>elif</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">if</span> condizione1<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">elif</span> condizione2<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">fi</span>
</span></span></code></pre></div></section><section>
<h2 id="bash-scripting-6">Bash scripting</h2>
<h3 id="il-comando-test">Il comando <code>test</code></h3>
<p>Il comando più frequentemente utilizzato come condizione nei branch è <code>test</code>.
Il comando ha due sintassi distinte ed equivalenti, la seconda delle quali è più comune:</p>
<ul>
<li><code>test condizione</code></li>
<li><code>[ condizione ]</code></li>
</ul>
<p>è interessante notare che <code>[</code> è un comando a sé stante, e <code>]</code> è un argomento di esso.</p>
<p>Le condizioni più comuni sono:</p>
<ul>
<li><code>-e file</code> – il file esiste</li>
<li><code>-f file</code> – il file esiste ed è un file</li>
<li><code>-d file</code> – il file esiste ed è una directory</li>
<li><code>-z stringa</code> – la stringa è vuota</li>
<li><code>-n stringa</code> – la stringa non è vuota</li>
<li><code>stringa1 = stringa2</code> – le stringhe sono uguali</li>
<li><code>stringa1 != stringa2</code> – le stringhe sono diverse</li>
<li><code>n1 -eq n2</code> – i numeri sono uguali</li>
<li><code>n1 -ne n2</code> – i numeri sono diversi</li>
<li><code>n1 -lt n2</code> – il primo numero è minore del secondo</li>
<li><code>n1 -le n2</code> – il primo numero è minore o uguale al secondo</li>
<li><code>n1 -gt n2</code> – il primo numero è maggiore del secondo</li>
<li><code>n1 -ge n2</code> – il primo numero è maggiore o uguale al secondo</li>
</ul>
</section><section>
<h2 id="bash-scripting-7">Bash scripting</h2>
<h3 id="iterazione-while-e-until">Iterazione: <code>while</code> e <code>until</code></h3>
<p>Il ciclo <code>while</code> esegue un blocco di comandi fintanto che una condizione è vera,
similmente a quanto accade in molti linguaggi di programmazione.
La sintassi è simila a quella di <code>if</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">while</span> condizione<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">do</span> comando1<span style="color:#000;font-weight:bold">;</span> comando2<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Alternativa</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">while</span> condizione<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>    comando1
</span></span><span style="display:flex;"><span>    comando2
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">done</span>
</span></span></code></pre></div><p>La <code>condizione</code> funziona esattamente come in <code>if</code>.</p>
<p>Il ciclo <code>until</code> è simile a <code>while</code>, ma esegue il blocco fintanto che la condizione è falsa,
e può essere utile per scrivere script idiomatici.</p>
</section><section>
<h2 id="bash-scripting-8">Bash scripting</h2>
<h3 id="iterazione-for">Iterazione: <code>for</code></h3>
<p>Il ciclo <code>for</code> esegue un blocco di comandi per ciascun elemento di una lista.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">for</span> variabile in elemento0 elemento1 elemento2<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">do</span> comando1<span style="color:#000;font-weight:bold">;</span> comando2<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">done</span>
</span></span></code></pre></div><p>Ad ogni iterazione, a <code>variabile</code> viene assegnato il valore dell’elemento corrente.</p>
<p>Un uso interessante di for è iterare su un insieme di file.
Ad esempio, se volessimo stampare il contenuto di tutti i file <code>txt</code> il cui nome comincia per <code>2024</code>,
potremmo scrivere:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">for</span> file in 2024*.txt<span style="color:#000;font-weight:bold">;</span> <span style="color:#204a87;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>  cat <span style="color:#000">$file</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">done</span>
</span></span></code></pre></div></section><section>
<h2 id="bash-scripting-9">Bash scripting</h2>
<h3 id="ordinamento-sort">Ordinamento: <code>sort</code></h3>
<p>Il comando <code>sort</code> permette di ordinare le righe di un file lessicograficamente,
oppure, con l’opzione <code>-n</code>.</p>
<p>Per ordinare un file <code>file.txt</code> e stamparne il contenuto ordinato, si può usare:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>sort file.txt
</span></span></code></pre></div><p><code>sort</code> funziona anche come filtro, quindi può essere usato in pipe.</p>
<p>L’ordinamento inverso può essere ottenuto con l’opzione <code>-r</code>.</p>
<h3 id="identificazione-di-linee-ripetute-uniq">Identificazione di linee ripetute: <code>uniq</code></h3>
<p>Il comando <code>uniq</code> permette di identificare e rimuovere linee ripetute <em>consecutivamente</em> in un file.</p>
<p>Un’opzione particolarmente utile è <code>-c</code>, che conta le occorrenze di ciascuna linea.</p>
<p>Può essere usato assieme con <code>sort</code> per identificare le linee identiche,
dato che anch’esso funziona come filtro.</p>
<p>Ad esempio, il seguente esempio conta le occorrenze di ciascuna linea in un file <code>file.txt</code>,
e le mostra dalla meno alla più frequente:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>sort file.txt <span style="color:#000;font-weight:bold">|</span> uniq -c <span style="color:#000;font-weight:bold">|</span> sort -n
</span></span></code></pre></div></section><section>
<h2 id="bash-scripting-10">Bash scripting</h2>
<h3 id="sostituzione-di-testo-sed">Sostituzione di testo: <code>sed</code></h3>
<p>Il comando <code>sed</code> (stream editor) permette di sostituire testo in un flusso di testo.</p>
<p>Prende due argomenti:</p>
<ol>
<li>una stringa che identifica il tipo di modifica da effettuare
<ul>
<li>il formato è <code>s/pattern/replacement/flags</code></li>
<li>il carattere <code>/</code> può essere sostituito con qualsiasi altro carattere,
se necessario usarlo in pattern o replacement
(ad esempio, <code>s@pattern@replacement@flags</code>)</li>
<li>l’utilizzo più semplice è quello di sostituire la prima occorrenza di <code>pattern</code> con <code>replacement</code>: <code>s/pattern/replacement/</code></li>
<li>per sostituire tutte le occorrenze, si aggiunge il flag <code>g</code>: <code>s/pattern/replacement/g</code></li>
</ul>
</li>
<li>il file da cui leggere le linee</li>
</ol>
<p>Il risultato non viene scritto sul file, ma stampato sullo standard output.</p>
<p>Se si desidera invece modificare il file originale, è possibile usare l’opzione <code>-i</code> (modifica “in place”).</p>
<p>Per esempio, per sostituire tutte le occorrenze di <code>debito</code> con <code>credito</code> all’interno di un file <code>tasse.txt</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>sed -i <span style="color:#4e9a06">'s/debito/credito/g'</span> tasse.txt
</span></span></code></pre></div></section><section>
<h2 id="esercizio-hacking-session">Esercizio: hacking session</h2>
<p>L’esercizio di riferimento per noi sarà il gioco “Bandit” di <a href="https://overthewire.org/wargames/">OverTheWire</a>,
una community di hacking.</p>
<p>Per tutta la durata degli esercizi, è consentito l’uso del materiale didattico,
di Internet, e ovviamente dei comandi di documentazione come <code>man</code>.</p>
<p>Lo scopo del gioco è quello di violare la sicurezza degli utenti sul server <code>bandit.labs.overthewire.org</code>,
che si chiamano <code>banditN</code>, dove <code>N</code> è un numero intero.
Violeremo per prima cosa la sicurezza dell’utente <code>bandit0</code>,
che è stato sprovveduto e ha inserito il proprio nome utente come password.</p>
<p>Ogni utente di cui riusciremo a violare la sicurezza
avrà accesso alle informazioni necessarie per violare la sicurezza dell’utente successivo
(ad esempio, dall’account di <code>bandit3</code>, operando col terminale, potremo trovare la password di <code>bandit4</code>).</p>
<ol>
<li>Si entri nel server <code>bandit.labs.overthewire.org</code> impersonando l’utente <code>bandit0</code></li>
<li>Collegarsi a <a href="https://overthewire.org/wargames/bandit/bandit1.html">https://overthewire.org/wargames/bandit/bandit1.html</a>.
Dato un qualunque utente, questo sito web ci fornisce informazioni su dove trovare la password di quello successivo
<ul>
<li>In caso di problemi (anche con la lingua) interpellare il docente</li>
</ul>
</li>
<li>Nel caso in cui non si riesca a trovare la password in modo autonomo, si interpelli il docente per una spiegazione o aiuto</li>
<li>Una volta che la password è stata trovata, si contatti il docente per una verifica dell’approccio adottato</li>
<li>Si proceda a violare la sicurezza dell’utente successivo, ripetendo i passaggi da 3 a 5, fino a raggiungere il livello 10</li>
</ol>
<p><strong>ATTENZIONE</strong>: a partire dal livello 10, saranno necessarie conoscenze ulteriori rispetto a quelle fornite in questo corso,
che sarete però in grado di acquisire a partire da quanto conosciamo già!</p>
<p>Il mondo cambia continuamente, <em>imparare a imparare</em> è più importante che imparare <i class="fa-solid fa-face-smile-wink"></i></p>
</section>

  


</div>
      

    </div>
<script type="text/javascript" src="/course-scm-linux-base/reveal-hugo/object-assign.js"></script>

<a href="/course-scm-linux-base/reveal-js/dist/print/" id="print-location" style="display: none;"></a>

<script type="application/json" id="reveal-hugo-site-params">{"custom_theme":"custom-theme.scss","custom_theme_compile":true,"custom_theme_options":{"enablesourcemap":true,"targetpath":"css/custom-theme.css"},"height":"1080","highlight_theme":"solarized-dark","history":true,"mermaid":[{}],"slide_number":true,"theme":"league","transition":"slide","transition_speed":"fast","width":"1920"}</script>
<script type="application/json" id="reveal-hugo-page-params">null</script>

<script src="/course-scm-linux-base/reveal-js/dist/reveal.js"></script>


  
  
  <script type="text/javascript" src="/course-scm-linux-base/reveal-js/plugin/markdown/markdown.js"></script>
  
  <script type="text/javascript" src="/course-scm-linux-base/reveal-js/plugin/highlight/highlight.js"></script>
  
  <script type="text/javascript" src="/course-scm-linux-base/reveal-js/plugin/zoom/zoom.js"></script>
  
  <script type="text/javascript" src="/course-scm-linux-base/reveal-js/plugin/notes/notes.js"></script>
  
  
  <script type="text/javascript" src="/course-scm-linux-base/reveal-js/plugin/notes/notes.js"></script>




<script type="text/javascript">
  
  
  function camelize(map) {
    if (map) {
      Object.keys(map).forEach(function(k) {
        newK = k.replace(/(\_\w)/g, function(m) { return m[1].toUpperCase() });
        if (newK != k) {
          map[newK] = map[k];
          delete map[k];
        }
      });
    }
    return map;
  }

  var revealHugoDefaults = { center: true, controls: true, history: true, progress: true, transition: "slide" };

  var revealHugoPlugins = {
    plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
   };
  var revealHugoSiteParams = JSON.parse(document.getElementById('reveal-hugo-site-params').innerHTML);
  var revealHugoPageParams = JSON.parse(document.getElementById('reveal-hugo-page-params').innerHTML);
  
  var options = Object.assign({},
    camelize(revealHugoDefaults),
    camelize(revealHugoSiteParams),
    camelize(revealHugoPageParams),
    camelize(revealHugoPlugins));
  Reveal.initialize(options);
</script>







  
  

  
  

  
  

  
  

  
  





    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
</script>

<script type="text/javascript" id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>

<script>
  if (/.*?(\?|&)print-pdf/.test(window.location.toString())) {
      var ytVideos = document.getElementsByTagName("iframe")
      for (let i = 0; i < ytVideos.length; i++) {
          var videoFrame = ytVideos[i]
          var isYouTube = /^https?:\/\/(www.)youtube\.com\/.*/.test(videoFrame.src)
          if (isYouTube) {
              console.log(`Removing ${videoFrame.src}`)
              var parent = videoFrame.parentElement
              videoFrame.remove()
              var p = document.createElement('p')
              p.append(
                  document.createTextNode(
                      "There was an embedded video here, but it is disabled in the printed version of the slides."
                  )
              )
              p.append(document.createElement('br'))
              p.append(
                  document.createTextNode(
                      `Visit instead ${
                          videoFrame.src
                      } or ${
                          videoFrame.src.replace(
                              /(^https?:\/\/(www.)youtube\.com)\/(embed\/)(\w+).*/,
                              "https://www.youtube.com/watch?v=$4"
                          )
                      }`
                  )
              )
              parent.appendChild(p)
          }
      }
  }
</script>


    
  

</body></html>