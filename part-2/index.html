<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
<title>Basi di Linux, secondo modulo</title>
<meta name="description" content="Corso Linux Base @SCM Group">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link rel="stylesheet" href="/course-scm-linux-base/reveal-js/dist/reset.css">
<link rel="stylesheet" href="/course-scm-linux-base/reveal-js/dist/reveal.css">
  <link rel="stylesheet" href="/course-scm-linux-base/css/custom-theme.min.735c7b5e1350dcbb94166b710e504a2b3a8b26832f76584661a03a5bfa20fa7d.css" id="theme"><link rel="stylesheet" href="/course-scm-linux-base/highlight-js/solarized-dark.min.css">
<link rel="stylesheet" href="https://gitcdn.link/repo/DanySK/css-blur-animation/master/blur.css">
<link href="https://fonts.googleapis.com/css?family=Roboto Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oxygen Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Ubuntu Mono" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
<script src="https://kit.fontawesome.com/81ac037be0.js" crossorigin="anonymous"></script>
<script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>

  </head>
  <body>
    
    <div class="reveal">
      <div class="slides">
  

    <section><h1 id="basi-di-linux-secondo-modulo">BASI DI LINUX, SECONDO MODULO</h1>
<h2 id="martina-baiardi"><a href="mailto:m.baiardi@unibo.it">Martina Baiardi</a></h2>
<h3 id="compiled-2025-12-02">Compiled 2025-12-02</h3>
</section><section>
<h1 id="macro-argomenti">Macro argomenti</h1>
<h2 id="1-gestione-periferiche">1. Gestione periferiche</h2>
<h2 id="2-strumenti-di-analisi-e-gestione-dei-processi">2. Strumenti di analisi e gestione dei processi</h2>
<h2 id="3-networking">3. Networking</h2>
</section><section>
<h2 id="1-gestione-periferiche-1">1. Gestione periferiche</h2>
</section><section>
<div class="multiCol">
<div class="col text-center">
<p><img src="../images/pci-bus.svg" alt="../images/pci-bus.svg"></p>
</div>
<div class="col">
<h3 id="connessione-delle-periferiche">Connessione delle periferiche</h3>
<ul>
<li>Tutte le periferiche sono connesse tramite un bus standard <em>PCI</em> (<em>Peripheral Component Interconnect</em>)</li>
<li>Alcune di esse comunicano direttamente con il bus, altre tramite i <em>controller</em></li>
<li>I controller regolano I/O con i dispositivi, alcuni sono direttamente integrati nella periferica (es. dischi),
altri invece consentono di utilizzare protocolli standard per connettersi a periferiche esterne (es. controller USB)</li>
</ul>
<p><strong>Ogni pc ha una diversa configurazione delle periferiche, l’immagine è solamente un esempio semplificato di una configurazione.</strong></p>
</div>
</div>
</section><section>
<h3 id="analisi-delle-periferiche-connesse-al-bus-pci">Analisi delle periferiche connesse al bus PCI</h3>
<h3 id="lspci"><code>lspci</code></h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> lspci
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:00.0 Host bridge: Intel Corporation Coffee Lake HOST and DRAM Controller (rev 0b)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:02.0 VGA compatible controller: Intel Corporation WhiskeyLake-U GT2 [UHD Graphics 620]
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:04.0 Signal processing controller: Intel Corporation Xeon E3-1200 v5/E3-1500 v5/6th Gen Core Processor Thermal Subsystem (rev 0b)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:08.0 System peripheral: Intel Corporation Xeon E3-1200 v5/v6 / E3-1500 v5 / 6th/7th/8th Gen Core Processor Gaussian Mixture Model
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:12.0 Signal processing controller: Intel Corporation Cannon Point-LP Thermal Controller (rev 30)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:14.0 USB controller: Intel Corporation Cannon Point-LP USB 3.1 xHCI Controller (rev 30)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:14.2 RAM memory: Intel Corporation Cannon Point-LP Shared SRAM (rev 30)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:14.3 Network controller: Intel Corporation Cannon Point-LP CNVi [Wireless-AC] (rev 30)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:15.0 Serial bus controller: Intel Corporation Cannon Point-LP Serial IO I2C Controller #0 (rev 30)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:15.1 Serial bus controller: Intel Corporation Cannon Point-LP Serial IO I2C Controller #1 (rev 30)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:16.0 Communication controller: Intel Corporation Cannon Point-LP MEI Controller #1 (rev 30)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:1c.0 PCI bridge: Intel Corporation Cannon Point-LP PCI Express Root Port #1 (rev f0)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:1c.4 PCI bridge: Intel Corporation Cannon Point-LP PCI Express Root Port #5 (rev f0)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:1d.0 PCI bridge: Intel Corporation Cannon Point-LP PCI Express Root Port #9 (rev f0)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:1d.4 PCI bridge: Intel Corporation Cannon Point-LP PCI Express Root Port #13 (rev f0)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:1e.0 Communication controller: Intel Corporation Cannon Point-LP Serial IO UART Controller #2 (rev 30)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:1e.2 Serial bus controller: Intel Corporation Cannon Point-LP Serial IO SPI Controller (rev 30)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:1f.0 ISA bridge: Intel Corporation Cannon Point-LP LPC Controller (rev 30)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:1f.3 Audio device: Intel Corporation Cannon Point-LP High Definition Audio Controller (rev 30)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:1f.4 SMBus: Intel Corporation Cannon Point-LP SMBus Controller (rev 30)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">00:1f.5 Serial bus controller: Intel Corporation Cannon Point-LP SPI Controller (rev 30)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">02:00.0 3D controller: NVIDIA Corporation GP108M [GeForce MX150] (rev a1)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">04:00.0 Non-Volatile memory controller: Sandisk Corp WD Blue SN500 / PC SN520 x2 M.2 2280 NVMe SSD (rev 01)
</span></span></span></code></pre></div><h3 id="lspci--tv"><code>lspci -tv</code></h3>
<p>Con l’aggiunta dei flag <code>-t</code> (visione ad albero) e <code>-v</code> (mostra tutte le informazioni) è possibile avere una visione gerarchica dei dispositivi connessi al bus PCI</p>
</section><section>
<h4 id="perchè-alcune-periferiche-sono-assenti-da-questa-lista">Perchè alcune periferiche sono assenti da questa lista?</h4>
<p>Perchè significa che tali dispositivi non sono direttamente connessi al bus, ma passano per un controller.
Ad esempio, tutti i miei dispositivi USB sono connessi al <em>controller USB</em>, che a sua volta è connesso al bus pci, il quale infatti è presente nella lista sopra.</p>
<h3 id="lsusb"><code>lsusb</code></h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> lsusb
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Bus 001 Device 002: ID 13d3:56cb IMC Networks USB2.0 HD IR UVC WebCam
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Bus 001 Device 003: ID 8087:0aaa Intel Corp. Bluetooth 9460/9560 Jefferson Peak (JfP)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Bus 001 Device 013: ID ffff:5678 USB Disk 2.0
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Bus 002 Device 003: ID 152d:0578 JMicron Technology Corp. / JMicron USA Technology Corp. JMS578 SATA 6Gb/s
</span></span></span></code></pre></div><h3 id="lsusb--tv"><code>lsusb -tv</code></h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#000;font-style:italic">/:  Bus 001.Port 001: Dev 001, Class=root_hub, Driver=xhci_hcd/12p, 480M
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    ID 1d6b:0002 Linux Foundation 2.0 root hub
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    |__ Port 002: Dev 036, If 0, Class=Mass Storage, Driver=usb-storage, 480M
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">        ID ffff:5678 USB Disk 2.0
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    |__ Port 005: Dev 002, If 0, Class=Video, Driver=uvcvideo, 480M
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">        ID 13d3:56cb IMC Networks 
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    |__ Port 005: Dev 002, If 1, Class=Video, Driver=uvcvideo, 480M
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">        ID 13d3:56cb IMC Networks 
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    |__ Port 005: Dev 002, If 2, Class=Video, Driver=uvcvideo, 480M
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">        ID 13d3:56cb IMC Networks 
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    |__ Port 005: Dev 002, If 3, Class=Video, Driver=uvcvideo, 480M
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">        ID 13d3:56cb IMC Networks 
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    |__ Port 010: Dev 003, If 0, Class=Wireless, Driver=btusb, 12M
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">        ID 8087:0aaa Intel Corp. Bluetooth 9460/9560 Jefferson Peak (JfP)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    |__ Port 010: Dev 003, If 1, Class=Wireless, Driver=btusb, 12M
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">        ID 8087:0aaa Intel Corp. Bluetooth 9460/9560 Jefferson Peak (JfP)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">/:  Bus 002.Port 001: Dev 001, Class=root_hub, Driver=xhci_hcd/6p, 10000M
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    ID 1d6b:0003 Linux Foundation 3.0 root hub
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    |__ Port 001: Dev 005, If 0, Class=Mass Storage, Driver=uas, 5000M
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">        ID 152d:0578 JMicron Technology Corp. / JMicron USA Technology Corp. JMS578 SATA 6Gb/s
</span></span></span></code></pre></div></section><section>
<div class="multiCol">
<div class="col text-center">
<img src="../images/linux-device-drivers.svg" width="80%">
</div>
<div class="col">
<h3 id="driver">Driver</h3>
<p>I <em>driver</em> sono moduli software di basso livello che consentono al sistema operativo di pilotare un dispositivo hardware.
Un insieme di driver standard sono già previsti all’interno del sistema operativo, per dispositivi particolari potrebbe essere necessario installare driver aggiuntivi.</p>
<p>Il sistema operativo espone poi delle interfacce standard per interagire con i dispositivi in modo <strong>trasparente</strong> per l’applicazione utente.</p>
</div>
</div>
</section><section>
<div class="multiCol">
<div class="col text-center">
<img src="../images/linux-device-drivers.svg" width="80%">
</div>
<div class="col">
<h3 id="file-dispositivo">File dispositivo</h3>
<p>La filosofia <em>“everything is a file”</em> si applica anche per le periferiche connesse alla macchina,
infatti esistono dei file speciali nella cartella <em>/dev</em> che sono la rappresentazione nel file system dei dispositivi.</p>
<p>Essendo dei file, il loro contenuto può essere analizzato come se fossero come tutti gli altri (utilizzando comandi come <code>cat</code>, <code>ls</code>, …),
però essi rappresentano delle interfacce di basso livello che le applicazioni utente possono utilizzare per interagire con i dispositivi con operazioni di I/O.</p>
</div>
</div>
</section><section>
<div class="multiCol">
<div class="col text-center">
<h3 id="file-dispositivo-1">File dispositivo</h3>
<p>All’interno della cartella <em>/dev</em> risiedono due categorie di file:</p>
<ul>
<li><strong>Character special files (c)</strong>: I/O basato sullo scambio di singoli caratteri (di dimensione 1 byte). Fanno parte di questa categoria dispotivi come <em>mouse</em>, <em>tastiere</em> e <em>schede audio</em>.</li>
<li><strong>Block special files (b)</strong>: I/O basato sullo scambio di <em>blocchi</em> di dati. Fanno parte di questa categoria <em>usb</em> e <em>hard disk</em>.</li>
</ul>
</div>
<div class="col">
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> ls -alh /dev
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">total 4,0K
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  21 root root            4,3K  5 set 12.54 .
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x  18 root root            4,0K  4 set 15.30 ..
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">[...]
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x   3 root root           60 21 ago 09.36 bus
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x   2 root root         4,8K  5 set 17.26 char
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">[...]
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">drwxr-xr-x   4 root root          400  5 set 17.26 input
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">[...]
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">crw-rw-rw-   1 root root     1,     3  2 set 14.47 null
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">crw-------   1 root root   241,     0  2 set 14.47 nvme0
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">brw-rw----   1 root disk   259,     0  2 set 14.47 nvme0n1
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">brw-rw----   1 root disk   259,     1  2 set 14.47 nvme0n1p1
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">brw-rw----   1 root disk   259,     2  2 set 14.47 nvme0n1p2
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">brw-rw----   1 root disk   259,     3  2 set 14.47 nvme0n1p3
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">[...]
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">crw-rw-rw-   1 root root     1,     8  2 set 14.47 random
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">[...]
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">brw-rw----   1 root disk     8,     0  2 set 14.47 sda
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">brw-rw----   1 root disk     8,     1  2 set 14.47 sda1
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">brw-rw----   1 root disk     8,     2  2 set 14.47 sda2
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">[...]
</span></span></span></code></pre></div></div>
</div>
</section><section>
<h3 id="character-device">Character device</h3>
<p>Per comprendere meglio che cos’è un device che comunica tramite un <em>character special file</em>, consideriamo il mouse.</p>
<p>Tutti i file all’interno della directory <code>/dev/input</code> consentono la comunicazione con le periferiche di input del nostro sistema (ad esempio: tastiera, mouse, webcam, …).</p>
<p>All’interno della directory <code>/dev/input/by-path</code> è possibile esplorare i dispositivi in maniera “user-friendly”.</p>
<br>
<p><strong>Domanda</strong>: Cosa succede eseguendo il comando <code>cat /dev/input/mice</code>?</p>


<span class="fragment ">
  <p>Sto visualizzando i byte che il mio mouse invia al sistema operativo ad ogni movimento!</p>

</span>

</section><section>
<h3 id="devsda-z1-15">/dev/sd[a-z][1-15]</h3>
<p>Associati al file con prefisso <em>sd</em> (SCSI Disk) storicamente si potevano individuare tutti i dispositivi che utilizzavano SCSI (stampanti, scanner, hard disk, …), oggi il protocollo è in disuso, ma i sistemi Linux continuano a indirizzare hark disk (SCSI, IDE e SATA) e chiavette USB a questo percorso.</p>
<ul>
<li><code>/dev/sda</code> rappresenta il primo hard disk, <code>/dev/sbd</code> il secondo, e così via.</li>
</ul>
<p>In caso il dispositivo presenti delle <strong>partizioni</strong>, esse sono rappresentate con un numero posto accanto al nome del dispositivo.</p>
<ul>
<li><code>/dev/sda1</code> è la prima partizione, <code>/dev/sda2</code> la seconda, e così via.</li>
</ul>
</section><section>
<h3 id="devnvme0-nn1-np0-15">/dev/nvme[0-N]n[1-N]p[0-15]</h3>
<p>Viene associato a tutti i dispositivi che utilizzano <em>NVM Express</em> (<em>NVMe</em>) come tecnologia per accedere al dispositivo di memoria non-volatile.
Viene comunemente utilizzato per i <em>dischi a stato solido</em> (<em>SSD</em>).</p>
<p>All’interno della cartella <em>/dev</em> è possibile distinguere:</p>
<ul>
<li>Il character device <code>/dev/nvme0</code> che rappresenta il <strong>controller</strong> del primo disco. Esso regola la scrittura sul disco, consentendo l’esistenza dei <em>namespace</em>.</li>
<li>Il block device <code>/dev/nvme0n1</code> rappresenta il namespace 1 all’interno del primo disco NVMe.</li>
<li>Il block device <code>/dev/nvme0n1p[1-15]</code> rappresenta la partizione [1-15] all’interno del namespace 1 del primo disco NMVe.</li>
</ul>
</section><section>
<div class="multiCol">
<div class="col">
<h3 id="namespace-di-un-disco-nvme">Namespace di un disco NVMe</h3>
<p>I <em>namespace</em> di un disco NMVe sono una suddivisione logica dei dati, gestita direttamente dal <em>controller</em> del disco stesso. Ogni namespace consente di essere trattato come un “disco” separato, consentendo un accesso concorrente rispetto gli altri namespace. I namespace vengono impiegati in computer con esigenze particolari, comunemente nei pc desktop si utilizza il namespace di default, ovvero il numero 1. Più dettagli riguardo ai namespace sono riportati sul sito di NVMe: <a href="https://nvmexpress.org/resource/nvme-namespaces/">https://nvmexpress.org/resource/nvme-namespaces/</a>.</p>
<h3 id="partizioni-di-un-disco">Partizioni di un disco</h3>
<p>Una partizione del disco definisce delle aree separate di memoria che possono essere gestite separatamente dal sistema operativo, ad ognuna di essere può essere associato un tipo di file system differente.</p>
</div>
<div class="col text-center">
<img src="../images/nvme-namespaces.svg" width="80%">
</div>
</div>
</section><section>
<h3 id="pseudo-dispositivi">Pseudo-dispositivi</h3>
<p>Sono dispositivi che non possiedono un componente fisico collegato al pc, ma offrono funzionalità implementate direttamente a livello di sistema operativo.
Alcuni esempi:</p>
<ul>
<li><code>/dev/random</code>: Produce uno stream infinito di bytes con valori <em>pseudo-casuali</em>. Vengono utilizzati per scopi crittografici.</li>
</ul>
<blockquote>
<p>Un computer è una macchina che segue delle regole per svolgere le sue funzioni, di conseguenza, anche se in grado di produrre numeri che all’apparenza sembrano casuali, essi non sono totalmente impredicibili come eventi naturali (ad esempio, il rumore atmosferico), per questo motivo vengono definiti come pseudo-casuali.</p>
</blockquote>
<ul>
<li><code>/dev/null</code>: Accetta qualsiasi tipo di input e lo scarta, senza produrre nessun output. L’utilizzo più comune per questo comando è quello di ignorare degli stream in uscita prodotti da processi.
Un esempio:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> cat /dev/random &gt; /dev/null
</span></span></code></pre></div><ul>
<li><code>/dev/zero</code>: Accetta qualsiasi tipo di input e lo scarta, producendo come output uno stream continuo di NULL (0 bytes). Utile per creare nuovi file contenenti unicamente dei byte a zero, con il fine di pre-allocare lo spazio sul disco.</li>
</ul>
</section><section>
<h3 id="cartella-devdisk">Cartella <code>/dev/disk</code></h3>
<p>Consente di esplorare tutte le unità di memoria connesse al computer in modalità “user-friendly”</p>
<h3 id="cartella-devbus">Cartella <code>/dev/bus</code></h3>
<p>Contiene tutti i controller (character devices) che gestiscono i dispositivi USB connessi al pc.</p>
</section><section>
<h2 id="ma-per-salvare-un-file-su-una-chiavetta-usb">Ma… per salvare un file su una chiavetta usb?</h2>
<div class="multiCol">
<div class="col text-center">


<span class="fragment ">
  <p><img src="../images/desperate-programmer.webp" alt="../images/desperate-programmer.webp"></p>

</span>

</div>
<div class="col">


<span class="fragment ">
  <p>Diversi strumenti aiutano sia l’esplorazione che l’utilizzo di dispositivi di memoria esterni:</p>
<ul>
<li><code>lsblk</code>: Informazioni sui dispositivi a blocchi connessi al pc.</li>
<li><code>fdisk</code>: Utility di sistema per gestire le partizioni dei dischi.</li>
<li><code>mount</code>: Utility per montare un file system ad un percorso.</li>
</ul>

</span>

</div>
</div>
</section><section>
<h3 id="lsblk"><code>lsblk</code></h3>
<p>Consente di consultare i dispositivi a blocchi presenti sul pc (fatta eccezione per la RAM), e informazioni importanti come il <strong>punto di mount</strong>, utilizzato per accedervi.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> lsblk
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">NAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">sda           8:0    1  29,3G  0 disk 
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">nvme0n1     259:0    0 476,9G  0 disk 
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">├─nvme0n1p1 259:1    0   300M  0 part /boot/efi
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">├─nvme0n1p2 259:2    0 459,7G  0 part /
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">└─nvme0n1p3 259:3    0    17G  0 part [SWAP]
</span></span></span></code></pre></div><p>Come mostra l’output del comando <code>lsblk</code> il disco in utilizzo sul pc presenta 3 partizioni, ciascuna delle quali ha un <em>punto di mount</em>.</p>
<p>Un <em>punto di mount</em> è una directory del file system che è logicamente connessa ad un altro file system, in questo esempio proveniente dal disco primario.</p>
</section><section>
<h3 id="fdisk"><code>fdisk</code></h3>
<p>Utility di sistema per gestire le partizioni di un disco, in questo ambito utile per investigare a quale file di sistema è stato associato il dispositivo USB connesso.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> fdisk -l
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Disk /dev/nvme0n1: 476,94 GiB, 512110190592 bytes, 1000215216 sectors
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Disk model: WDC PC SN520 SDAPNUW-512G-1002          
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Units: sectors of 1 * 512 = 512 bytes
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Sector size (logical/physical): 512 bytes / 512 bytes
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">I/O size (minimum/optimal): 512 bytes / 512 bytes
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Disklabel type: gpt
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Disk identifier: BCA6CA00-08B6-6245-83F8-FC173D095FFA
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#000;font-style:italic">Device             Start        End   Sectors   Size Type
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">/dev/nvme0n1p1      4096     618495    614400   300M EFI System
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">/dev/nvme0n1p2    618496  964576913 963958418 459,7G Linux filesystem
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">/dev/nvme0n1p3 964576914 1000206899  35629986    17G Linux swap
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#000;font-style:italic">Disk /dev/sda: 29,3 GiB, 31457280000 bytes, 61440000 sectors
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Disk model: ProductCode     
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Units: sectors of 1 * 512 = 512 bytes
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Sector size (logical/physical): 512 bytes / 512 bytes
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">I/O size (minimum/optimal): 512 bytes / 512 bytes
</span></span></span></code></pre></div><p>Altri utilizzi dell’utility <code>fdisk</code> non sono coperti da questo corso, ma possono essere approfonditi dal manuale utente: <a href="https://man7.org/linux/man-pages/man8/fdisk.8.html">https://man7.org/linux/man-pages/man8/fdisk.8.html</a></p>
</section><section>
<h3 id="mount"><code>mount</code></h3>
<p>Consente di montare un file system esterno su una cartella desiderata all’interno di un percorso del pc</p>
<p>Il file system esterno può provenire da un dispositivo rimovibile o da un percorso di rete, in questa lezione copriamo il primo caso.</p>
<p>Con il comando <code>fdisk -l</code> sono a conoscenza di qual è il percorso che mi consente di accedere al mio dispositivo USB (in questo caso <code>/dev/sda</code>),
mentre il comando <code>lsblk</code> mostra che il device <code>/dev/sda</code> al momento non possiede un mount point per accedervi.</p>
<p>Il processo è semplice:</p>
<ol>
<li>Creo una cartella che voglio utilizzare per accedere al file system del mio dispositivo usb</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> mkdir <span style="color:#000">$HOME</span>/usb
</span></span></code></pre></div><ol start="2">
<li>Monto il dispositivo all’interno della cartella che ho appena creato</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> mount /dev/sda <span style="color:#000">$HOME</span>/usb
</span></span></code></pre></div><ol start="3">
<li>Posso accedere ai dati in lettura e in scrittura</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> ls -alh <span style="color:#000">$HOME</span>/usb
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">...
</span></span></span></code></pre></div><ol start="4">
<li>Per “scollegare” il dispositivo dal file system basta utilizzare il comando <code>umount</code></li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> umount /dev/sda
</span></span><span style="display:flex;"><span><span style="color:#8f5902">$</span> ls -alh <span style="color:#000">$HOME</span>/usb
</span></span></code></pre></div></section><section>
<h2 id="2-strumenti-di-analisi-e-gestione-dei-processi-1">2. Strumenti di analisi e gestione dei processi</h2>
</section><section>
<h3 id="processi">Processi</h3>
<p>Ogni programma eseguito in un sistema linux ha il suo <em>processo</em>.</p>
<p>I processi hanno una struttura gerarchica, la radice comune a tutti è il processo <em>init</em> responsabile dell’esecuzione di tutti i software all’interno del sistema.</p>
<p>Ogni processo:</p>
<ul>
<li>Ha un identificatore numerico univoco, chiamato <strong>PID</strong> (Process IDentifier). Il PID è un numero intero positivo, e viene assegnato in ordine crescente ad ogni processo che viene creato. Il PID del processo corrente può essere ottenuto con il comando <code>echo $$</code>.</li>
<li>È indipendente dagli altri, consentendo di eseguire simultaneamente.</li>
<li>Ha il suo spazio di indirizzi in memoria (RAM), consentendo al processo di eseguire, scrivere e leggere liberamente in quella porzione di memoria senza sovrascrivere i dati di altri processi.</li>
</ul>
</section><section>
<h3 id="stati-di-un-processo">Stati di un processo</h3>
<p>Lo stato di un processo può essere:</p>
<ul>
<li><em>In esecuzione</em> (<em>Running</em>): il processo è attualmente in esecuzione e sta svolgendo il suo compito.</li>
<li><em>In attesa</em> (<em>Sleeping</em>): il processo è in attesa di un evento per continuare la sua esecuzione, ad esempio l’attesa di un input da parte dell’utente.</li>
<li><em>Sospeso</em> (<em>Stopped</em>): il processo ha ricevuto un segnale di terminazione, attraverso l’utilizzo dei comandi <code>kill</code> o <code>killall</code> e non sta eseguendo nessuna operazione, ma <strong>la sua esecuzione può essere riesumata</strong>.</li>
<li><em>Zombie</em>: Il processo ha terminato la sua esecuzione e rilasciato tutte le risorse di sistema, ma non è stato rimosso dall’elenco dei processi attivi. Questo accade perchè l’<em>exit-code</em> non è stato letto dal processo padre, operazione necessaria per rimuoverlo dall’elenco.</li>
</ul>
<br>
<br>
<p>L’<em>exit-code</em> è un valore numerico (0-255) restituito al processo padre nel momento in cui un processo termina.
La convenzione per gli exit-code è:</p>
<ul>
<li><code>0</code> significa che il processo è terminato correttamente</li>
<li><code>1-255</code> il processo è terminato con un errore. Idealmente ogni valore identifica un errore differente, ma il significato che ad essi è associato può variare.</li>
</ul>
</section><section>
<h3 id="tipi-di-processo">Tipi di processo</h3>
<p>Un processo in esecuzione può essere di tre tipi:</p>
<ul>
<li><em>Foreground</em>: Richiedono che un utente li faccia partire e/o che interagisca con loro durante l’esecuzione. Di default tutti i comandi eseguono come processi in foreground. Un esempio di interazione con l’utente è la visualizzazione degli output di un comando lanciato da terminale: finchè esso non termina, infatti, l’utente non può eseguire un altro comando nello stesso terminale perchè “occupato” dal processo in esecuzione.</li>
<li><em>Background</em>: Eseguono senza necessità di interagire con l’utente.</li>
<li><em>Daemon</em>: Sono processi costantemente in esecuzione all’interno del sistema, alcuni in esecuzione e alcuni sospesi (stopped). Essi consentono di fornire servizi di sistema. Verranno approfonditi nel modulo corso di linux avanzato.</li>
</ul>
</section><section>
<h3 id="stato-corrente-dei-processi-ps">Stato corrente dei processi: <code>ps</code></h3>
<p>Il comando <code>ps</code> (Process Status) permette di ottenere informazioni sui processi attivi.</p>
<p>Di default, <code>ps</code> mostra i processi attivi dell’utente corrente.</p>
<p><code>ps</code> senza opzioni mostra i processi dell’utente corrente associati al terminale su cui ps viene lanciato.</p>
<p><code>ps a</code> mostra i processi di tutti gli utenti.</p>
<p><code>ps u</code> mostra le informazioni in formato user-oriented.</p>
<p><code>ps x</code> mostra informazioni sui processi che non hanno un terminale di controllo (background, demoni, servizi)</p>
<p>Le tre opzioni vengono tipicamente combinate: <code>ps aux</code></p>
</section><section>
<p>È possibile eseguire un processo in background post-ponendo <code>&amp;</code> al comando su terminale. Ad esempio:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> sh -c <span style="color:#4e9a06">'sleep 5 &amp;&amp; echo Terminato!'</span> <span style="color:#000;font-weight:bold">&amp;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">[1] 131593
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#8f5902">$</span> <span style="color:#204a87">jobs</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">[1]  + 131593 running    sh -c 'sleep 5 &amp;&amp; echo Terminato!'
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#8f5902">$</span> Terminato!
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">[1]  + 131593 done       sh -c 'sleep 5 &amp;&amp; echo Terminato!'
</span></span></span></code></pre></div><p>Questo comando esegue uno script shell che attende 5 secondi poi scrive sullo standard output “Terminato!”.</p>
<p>Se non lo eseguissi in background (rimuovendo <code>&amp;</code>) dovrei attendere 5 secondi prima di poter interagire nuovamente con il terminale da cui l’ho lanciato, perchè di default è un processo in foreground.</p>
<p>Per gestire i processi in background <strong>figli del processo corrente</strong> posso eseguire:</p>
<ul>
<li><code>jobs</code> consente di visualizzare l’elenco dei sotto-processi in background</li>
<li><code>fg</code> comando che consente di spostare l’esecuzione in foreground di un processo in background. Se non viene specificato l’id, viene prelevato l’ultimo che è stato posto in background.</li>
</ul>
</section><section>
<h3 id="visualizzazione-dei-processi-in-esecuzione-top--htop">Visualizzazione dei processi in esecuzione (<code>top</code> / <code>htop</code>)</h3>
<p><code>top</code> Consente di avere una visione real-time dei processi in esecuzione, insieme ad una preziosa panoramica delle risorse utilizzate rispetto alle totali.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> top
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">top - 15:33:59 up  4:42,  2 users,  load average: 2,70, 6,53, 4,70
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Tasks: 339 total,   1 running, 338 sleeping,   0 stopped,   0 zombie
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#8f5902">%</span>Cpu<span style="color:#ce5c00;font-weight:bold">(</span>s<span style="color:#ce5c00;font-weight:bold">)</span>:  3,4 us,  1,5 sy,  0,0 ni, 94,4 id,  0,1 wa,  0,5 hi,  0,2 si,  0,0 st 
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">MiB Mem :  15808,3 total,    847,4 free,  10927,9 used,   5369,8 buff/cache     
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">MiB Swap:  17397,4 total,  17341,2 free,     56,2 used.   4880,4 avail Mem 
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#000;font-style:italic">    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"> 137878 anitvam   20   0 1239992 231768 211956 S   6,6   1,4   0:00.83 konsole
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    847 root      20   0 1182360 207444 141000 S   5,0   1,3  12:04.65 Xorg
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">   1728 anitvam   20   0 2534772 279132 130920 S   4,7   1,7  10:47.28 kwin_x11
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">   2716 anitvam   20   0   33,2g 658404 324392 S   4,3   4,1  19:14.92 chrome
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">   2763 anitvam   20   0   32,4g 165380 110848 S   3,0   1,0   4:21.39 chrome
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">  77629 anitvam   20   0 1156,0g 401540 139904 S   2,0   2,5   4:31.55 chrome
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    679 root      20   0   22992  16612   6500 S   1,7   0,1   1:08.24 python3
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">   1769 anitvam   20   0 3644448 417728 166268 S   1,3   2,6   5:16.92 plasmashell
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">   4771 101       20   0 1555036 155724  46304 S   1,0   1,0   1:37.89 mongod
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    435 root     -51   0       0      0      0 S   0,7   0,0   0:16.40 irq/109-ELAN1401:00
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">   1878 anitvam   20   0  246104  35724  30604 S   0,7   0,2   1:15.28 ksystemstats
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">  78013 anitvam   20   0 1155,9g 173896 110072 S   0,7   1,1   0:27.40 chrome
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"> 138113 anitvam   20   0 1131,9g 369660  93528 S   0,7   2,3   0:22.63 code
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"> 140042 anitvam   20   0   11072   8060   5884 R   0,7   0,0   0:00.07 top
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    171 root       0 -20       0      0      0 I   0,3   0,0   0:01.47 kworker/2:1H-events_highpri
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    678 root      20   0  413844  25020  20668 S   0,3   0,2   0:16.80 NetworkManager
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">   1725 anitvam   20   0  772716  64736  53452 S   0,3   0,4   0:04.25 ksmserver
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">   1963 anitvam   20   0 5887584 285932  41824 S   0,3   1,8   1:16.35 jetbrains-toolb
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">  77659 anitvam   20   0 1219,6g 319376 111132 S   0,3   2,0   4:21.60 chrome
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">...
</span></span></span></code></pre></div></section><section>
<div class="multiCol">
<div class="col">
<p><code>top</code> è un comando interattivo, che aggiorna le informazioni ogni intervallo di tempo prestabilito.</p>
<p>Una volta individuato un processo critico che sta utilizzando un numero inaspettatamente superiore delle risorse previste, è possibile mandargli il segnale di terminazione direttamente mentre <code>top</code> è in esecuzione, premendo il tasto <code>k</code> sulla tastiera.</p>
<p>Una volta premuto k posso indicare a direttamente l’id e il segnale da mandare al processo.</p>
</div>
<div class="col text-center">
<p>Esiste anche una versione più semplice da navigare con anche una presentazione a colori, chiamata <code>htop</code>.</p>
<img src="../images/htop.png">
</div>
</div>
</section><section>
<h3 id="processi-segnali-e-loro-gestione">Processi, segnali, e loro gestione</h3>
<p>UNIX consente ai processi di inviare segnali ad altri processi.</p>
<p>I segnali sono numerici, e ciascuno ha un significato specifico.</p>
<p>Quelli più rilevanti per noi sono:</p>
<ol>
<li><code>SIGINT</code> (2) – segnale che viene inviato alla pressione di <kbd>Ctrl</kbd><kbd>C</kbd>, che chiede al processo di terminare ordinatamente (simile a <code>SIGTERM</code>)</li>
<li><code>SIGTERM</code> (15) – segnale di terminazione, che chiede al processo di terminare ordinatamente</li>
<li><code>SIGKILL</code> (9) – segnale di terminazione forzata, che termina il processo immediatamente</li>
<li><code>SIGSTOP</code> (19) – segnale di pausa del processo, che lo sospende senza terminarlo</li>
<li><code>SIGCONT</code> (18) – segnale di continuazione del processo, che lo fa ripredere se attualmente sospeso</li>
</ol>
</section><section>
<h3 id="invio-di-segnali-ai-processi-kill">Invio di segnali ai processi: <code>kill</code></h3>
<p>A dispetto del nome, il comando <code>kill</code> non “uccide” i processi, ma permette di inviare loro segnali.</p>
<p>Sintassi: <code>kill [opzioni] PID</code>.
Se nessuna opzione viene specificata, al processo target viene inviato un segnale <code>SIGTERM</code>.</p>
<p>Può essere inviato un segnale diverso sostituendo <code>SIG</code> con <code>-</code>, per esempio: <code>kill -KILL 6754</code> manda un <code>SIGKILL</code> al processo con PID 6754.</p>
<p>Con l’opzione <code>-s</code>, è possibile inviare un segnale in base al suo numero.
Il comando precedente è equivalente a <code>kill -s 9 6754</code></p>
<h3 id="invio-di-segnali-a-processi-usando-il-nome-killall">Invio di segnali a processi usando il nome: <code>killall</code></h3>
<p>Il comando <code>killall</code> è simile a <code>kill</code>, ma invece di prendere un PID,
prende un nome di processo e invia il segnale a tutti i processi che corrispondono a quel nome</p>
</section><section>
<h3 id="load-average">Load average</h3>
<p>La prima riga di output del comando <code>top</code> riporta delle informazioni importanti per un amministratore di sistema,
infatti, esse mostrano da quanto tempo il computer è in esecuzione, quanti utenti sono attivi in un determinato momento e qual è il <em>load average</em> del sistema.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> top
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">top - 15:33:59 up  4:42,  2 users,  load average: 2,70, 6,53, 4,70
</span></span></span></code></pre></div><p>Il <em>load average</em> non è altro che la media del numero di processi in attesa di essere eseguiti dal processore.</p>
<p>La metrica mostra tre valori in quanto rappresentano la media per gli ultimi 1, 5 e 15 minuti d’esecuzione.</p>
<br>
<p><strong>Si può ottenere la stessa informazione eseguendo il comando <code>uptime</code></strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> uptime
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"> 16:06:02 up  5:14,  2 users,  load average: 1,02, 1,19, 1,77
</span></span></span></code></pre></div></section><section>
<h3 id="amministrazione-dei-processi">Amministrazione dei processi</h3>
<p>I processi in esecuzione, scrivono importanti informazioni sull’andamento della loro esecuzione in file di <code>log</code>.</p>
<p>I file di log sono fondamentali per gestire un processo fallito in modo inaspettato e identificare una soluzione.</p>
<p>I file di log sono memorizzati nella cartella <code>/var/log</code> e possono essere di due formati: <em>log di sistema</em> (in binario) e <em>log di testo normale</em>.</p>
<p>Gran parte delle applicazioni memorizzano utilizzando il servizio di log di sistema, per interagire con essi è necessario passare dall’utility di <code>journalctl</code>.</p>
</section><section>
<h3 id="journalctl"><code>journalctl</code></h3>
<br>
<h4 id="journalctl--b"><code>journalctl -b</code></h4>
<p>Filtra i log a partire dal riavvio più recente. Altrimenti l’output parte dai log più vecchi memorizzati.
È possibile specificare di quanti riavvii il journal deve filtrare gli output con degli indici negativi;
se <code>0</code> indica il riavvio corrente, <code>-1</code> indica quello precedente e così via.</p>
<h4 id="journalctl--p-err"><code>journalctl -p err</code></h4>
<p>Filtra i log per livello di gravità “err”.</p>
<h4 id="journalctl--k"><code>journalctl -k</code></h4>
<p>Filtra i log relativi al kernel.</p>
<h4 id="journalctl---since-yesterday"><code>journalctl --since yesterday</code></h4>
<p>Filtra i log a partire dal giorno precedente.</p>
<h4 id="journalctl---since-2024-01-09---until-2024-09-09"><code>journalctl --since "2024-01-09" --until "2024-09-09"</code></h4>
<p>Filtra i log appartenenti ad un intervallo di tempo prestabilito, specificato con lo standard ISO 8601 (<em>YYYY-MM-DD</em>).</p>
<h4 id="journalctl--f"><code>journalctl -f</code></h4>
<p>Mostra i log correnti e mostra i log in tempo reale nel terminale.</p>
</section><section>
<div class="multiCol">
<div class="col">
<h4 id="ma-questi-dati-non-saturano-il-disco-a-lungo-termine">Ma questi dati non saturano il disco a lungo termine?</h4>


<span class="fragment ">
  <p><strong>Potenzialmente sì</strong>.</p>
<p>Per questo motivo, a intervalli di tempo stabiliti, i file di log vengono <em>ruotati</em>, ovvero:</p>
<ol>
<li>Rinominati</li>
<li>Sostituiti da nuovi file di log</li>
<li>Compressi con gzip</li>
</ol>
<p>Grazie alla rotazione dei log è quindi possibile ottimizzare lo spazio occupato da essi, seppur mantenendo la possibilità di analizzarli in futuro.
<code>logrotate</code> è il comando che si occupa della rotazione dei file di log, configurato con il file di sistema <code>/etc/logrotate.conf</code>.</p>

</span>

</div>
<div class="col">


<span class="fragment ">
  <div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> cat /etc/logrotate.conf
</span></span><span style="display:flex;"><span><span style="color:#8f5902">#</span> see <span style="color:#4e9a06">"man logrotate"</span> <span style="color:#204a87;font-weight:bold">for</span> details
</span></span><span style="display:flex;"><span><span style="color:#8f5902">#</span> rotate log files weekly
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">weekly
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#8f5902">#</span> keep <span style="color:#0000cf;font-weight:bold">4</span> weeks worth of backlogs
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">rotate 4
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#8f5902">#</span> restrict maximum size of log files
</span></span><span style="display:flex;"><span><span style="color:#8f5902">#</span>size 20M
</span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#8f5902">#</span> create new <span style="color:#ce5c00;font-weight:bold">(</span>empty<span style="color:#ce5c00;font-weight:bold">)</span> log files after rotating old ones
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">create
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#8f5902">#</span> uncomment this <span style="color:#204a87;font-weight:bold">if</span> you want your log files compressed
</span></span><span style="display:flex;"><span><span style="color:#8f5902">#</span>compress
</span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#8f5902">#</span> Logs are moved into directory <span style="color:#204a87;font-weight:bold">for</span> rotation
</span></span><span style="display:flex;"><span><span style="color:#8f5902">#</span> olddir /var/log/archive
</span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#8f5902">#</span> Ignore pacman saved files
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">tabooext + .pacorig .pacnew .pacsave
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#8f5902">#</span> Arch packages drop log rotation information into this directory
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">include /etc/logrotate.d
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#000;font-style:italic">/var/log/wtmp {
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    monthly
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    create 0664 root utmp
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    minsize 1M
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    rotate 1
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">}
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#000;font-style:italic">/var/log/btmp {
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    missingok
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    monthly
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    create 0600 root utmp
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    rotate 1
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">}
</span></span></span></code></pre></div>
</span>

</div>
</div>
</section><section>
<h2 id="3-networking-1">3. Networking</h2>
</section><section>
<h3 id="che-cosè-internet">Che cos’è Internet</h3>
<p><em>Internet</em> è una <em>rete</em> che interconnette <em>dispositivi</em> provenienti da tutto il mondo.</p>
<blockquote>
<p>Ci sono 5,16 miliardi utenti di Internet, il 64,4% della popolazione mondiale è ora online.
<br> <a href="https://wearesocial.com/it/blog/2023/01/digital-2023-i-dati-globali/">Fonte</a></p>
</blockquote>
</section><section>
<div class="multiCol">
<div class="col">
<h3 id="host--end-system">Host / End System</h3>
<p>Tutti i dispositivi connessi ad internet sono chiamati <em>host</em> (o <em>end system</em>).
<em>Host</em> perchè essi “ospitano” le applicazioni che utilizzano internet, <em>end system</em> perchè risiedono “ai bordi” rispetto alla vasta infrastruttura Internet. Sono host:</p>
<ul>
<li>pc desktop,</li>
<li>server,</li>
<li>dispositivi mobile (laptop, smartphone, tablet),</li>
<li><em>“cose”</em> / <em>“things”</em> (smartwatch, smartfridge, …)</li>
</ul>
<br>
<br>
<p>Gli host sono suddivisi in due categorie:</p>
<ul>
<li><em>Server</em>: Computer ad alte prestazioni che conservano e distribuiscono dati / servizi in internet (pagine web, stream video, e-mail, …)</li>
<li><em>Client</em>: Tutti gli altri dispositivi, che usufruiscono dei dati / servizi offerti dai server.</li>
</ul>
</div>
<div class="col text-center">
<img src="../images/internet-architecture.png">
</div>
</div>
</section><section>
<div class="multiCol">
<div class="col">
<h3 id="packet-switches">Packet Switches</h3>
<p>Gli host sono connessi tra loro grazie a:</p>
<ul>
<li>Una <em>rete di connessioni</em> (<em>communication links</em>)</li>
<li>Un insieme di <em>commutatori di pacchetti</em> (<em>packet switches</em>), grazie ai quali le informazioni (<em>pacchetti</em> di dati) vengono instradate verso la destinazione.</li>
</ul>
<br>
<br>
<p>Esistono due principali tipi di commutatori di pacchetti:</p>
<ul>
<li><em>Routers</em>: Connette dispositivi appartenenti a reti diverse</li>
<li><em>Switch</em>: Connette dispositivi appartenenti alla stessa rete</li>
</ul>
</div>
<div class="col text-center">
<img src="../images/internet-architecture.png">
  <small>
<p>Fonte: Computer Networking: A top-down approach - Kurose, Ross</p>
  </small>

</div>
</div>
</section><section>
<h3 id="rete">Rete</h3>
<p>È possibile distinguere due tipologie di rete:</p>
<ul>
<li><em>Reti geografiche</em> (<em>Wide Area Network</em>, o <em>WAN</em>): coprono ampie distanze geografiche, consentendo la connessione tra siti distanti tra loro. Per farlo si connettono alle infrastrutture fornite dagli <em>Internet Service Provider</em> (<em>ISP</em>).</li>
<li><em>Reti locali</em> (<em>Local Area Network</em>, o <em>LAN</em>): progettate per coprire aree limitate (come aziende, abitazioni e campus).</li>
</ul>
</section><section>
<div class="multiCol">
<div class="col">
<h3 id="internet-service-provider-isp">Internet Service Provider (ISP)</h3>
<p>Gli <em>ISPs</em> sono aziende che possiedono parte della complessa infrastruttura di rete, essi consentono agli utenti finali di stipulare contratti per accedere a Internet.</p>
<p>Esistono tre tipologie di ISP:</p>
<ul>
<li><em>ISP di livello 1</em>: Sono in cima alla gerarchia e non pagano per il traffico che transita nella loro rete. Per coprire la più vasta area possibile geografica, questi fornitori di ISP si connettono tra loro, consentendo gratuitamente il traffico che transita da uno all’altro. Sono in tutto il mondo una dozzina di ISP.</li>
<li><em>ISP di livello 2</em>: Si connettono agli ISP di livello 1, pagando un canone per far transitare il loro traffico da una geolocalizzazione ad un’altra. Hanno una portata regionale/nazionale.</li>
<li><em>ISP di livello 3</em>: Sono quelli più vicini agli utenti finali, consentono ad essi l’accesso alla rete addebitando una somma di denaro. Questi ISP pagano gli ISP di livello 2 in base al traffico che fanno transitare.</li>
</ul>
</div>
<div class="col text-center">
<img src="../images/isp.jpg" width="100%">
  <small>
<p><a href="https://orhanergun.net/tier-1-tier-2-and-tier-3-service-providers">Fonte</a></p>
  </small>

</div>
</div>
</section><section>
<h3 id="protocolli-di-rete">Protocolli di rete</h3>
<p>Compresa la complessa architettura della rete internet, si comprende quanto sia necessario che il transito delle informazioni al suo interno debba essere regolato. A questo scopo servono i <em>protocolli di rete</em>.</p>
<br>
<br>
<blockquote>
<p>Un protocollo definisce il formato e l’ordine dei messaggi scambiati tra due o più entità comunicanti,
come anche le azioni che bisogna intraprendere nel momento in cui si invia e/o riceve un messaggio.
<br> Computer Networking: A top-down approach - Kurose, Ross</p>
</blockquote>
</section><section>
<div class="multiCol">
<div class="col">
<h3 id="tcpip">TCP/IP</h3>
<p>I protocolli di rete sono organizzati a <em>livelli</em> (<em>layers</em>).</p>
<p>Ogni protocollo appartiene ad uno specifico livello, che può essere implementato via hardware, via software o una combinazione dei precedenti.</p>
<p>Internet si compone di uno <em>stack</em> di 5 livelli di protocolli, dall’alto:</p>
<ul>
<li><em>Fisico</em></li>
<li><em>Connessione</em></li>
<li><em>Rete</em></li>
<li><em>Trasporto</em></li>
<li><em>Applicazione</em></li>
</ul>
</div>
<div class="col text-center">
<img src="../images/tcpip.svg" width="50%/">
</div>
</div>
</section><section>
<h3 id="tcpip-livello-fisico">TCP/IP: Livello Fisico</h3>
<p>Il ruolo del livello fisico è di far transitare le informazioni bit per bit sui canali che portano il messaggio a destinazione.</p>
<p>I protocolli che fanno parte di questo livello sono strettamente legati al mezzo utilizzato per far transitare le informazioni:</p>
<ul>
<li><em>Doppino telefonico</em>: Uno dei mezzi di trasmissione più vecchi, proveniente dalle linee telefoniche fisse ma ancora molto utilizzato. È chiamato doppino perchè composto da due fili di rame intrecciati tra loro.</li>
<li><em>Cavo coassiale</em>: Mezzo proveniente dalla trasmissione per la TV via cavo, sono più schermati dei doppini telefonici. Per questo motivo furono largamente utilizzati anche dalle compagnie telefoniche per le comunicazioni tra lunghe distanze. Sebbene per la TV via cavo è ancora molto utilizzato, le compagnie telefoniche sono transitate all’uso di tecnologie più performanti come <em>fibre ottiche</em>.</li>
<li><em>Fibra ottica</em>: Questa tecnologia si basa sul transito di un raggio di luce e viene impiegata per le trasmissioni a lunga distanza nelle dorsali di rete, nelle reti locali ad alta velocita (come alternativa al rame) e in alcuni casi anche per l’accesso ad alta velocità a Internet (<em>FTTH</em>, <em>Fiber To The Home</em>).</li>
<li><em>Onde radio</em>: Si basa sulla trasmissione tramite onde radio. Adatte per trasmissioni a medio raggio. Tecnologia alla base di <em>WiFi</em> e <em>Reti mobili</em>.</li>
</ul>
</section><section>
<h3 id="le-dorsali">Le dorsali</h3>
<div class="multiCol">
<div class="col text-center">
<img src="../images/dorsali-fibra.webp" width="100%"> 
  <small> 
<p><a href="https://www.popinga.it/i-cavi-sottomarini-in-fibra-ottica-889f579d4049">Fonte</a></p>
  </small>

</div>
<div class="col text-center">
<img src="../images/fibra-italia.jpg" width="100%"> 
  <small> 
<p><a href="https://www.garr.it/it/infrastrutture/rete-nazionale/rete-garr-t">Fonte</a></p>
  </small> 

</div>
</div>
</section><section>
<h3 id="tcpip-livello-di-collegamento">TCP/IP: Livello di Collegamento</h3>
<div class="multiCol">
<div class="col">
<p>Si occupa di instradare un pacchetto ricevuto da un livello di rete trasmettendolo al livello di rete dell’host destinatario.
Per farlo, comunica bit per bit l’informazione che deve essere trasmessa.</p>
<p>A livello concettuale si può considerare che la comunicazione avviene tra due livelli di rete, anche se il percorso reale che l’informazione percorre passa dal livello fisico.</p>
<p>Il livello di collegamento inoltre verifica che non siano avvenuti <em>errori di trasmissione</em> e regola il <em>flusso</em> tra sorgente e destinatario.</p>
<p>Fanno parte di questo livello protocolli <em>Ethernet</em> (<em>IEEE 802.3</em>) e <em>WiFi</em> (<em>IEEE 802.11</em>).</p>
<br>
<br>
<p>I pacchetti che transitano in questo livello di rete sono chiamati <em>frame</em>.</p>
</div>
<div class="col text-center">
<img src="../images/host-communication-internet-protocol.png" width="70%">
<p><small> Fonte: Computer Networking: A top-down approach - Kurose, Ross </small>
</p>
</div>
</div>
</section><section>
<div class="multiCol">
<div class="col">
<h4 id="dovè-implementato-il-livello-di-collegamento">Dov’è implementato il livello di collegamento?</h4>
<p>Il livello di collegamento rappresenta il punto in cui i protocolli dello stack tcp/ip passano dall’essere implementati via software ad essere hardware (e viceversa). Infatti sono generalmente implementati da una combinazione di componenti hardware e software.</p>
<p>La maggior parte delle operazioni di questo livello risiede all’interno della scheda di rete di un host (<em>Network Interface Card</em> o <em>NIC</em>).</p>
</div>
<div class="col text-center">
<img src="../images/NIC.png">
<p><small> Fonte: Computer Networking: A top-down approach - Kurose, Ross </small>
</p>
</div>
</div>
</section><section>
<h4 id="indirizzi-mac">Indirizzi MAC</h4>
<p>Gli host e i router nella rete hanno assegnato un indirizzo a livello di collegamento, chiamato <em>MAC</em> (<em>Media Address Control</em> address). Gli switch invece no, perchè essi hanno solamente il compito di inoltrare il pacchetto da host a router (e viceversa) in modo trasparente.</p>
<p><em>MAC</em> è un indirizzo di 6 byte, in notazione esadecimale, assegnato univocamente dai produttori delle schedere di rete al singolo dispositivo.
Non esistono al mondo due schede di rete con lo stesso indirizzo <em>MAC</em>, perchè la loro distribuzione è regolamentata dalla <em>IEEE</em>.</p>
<p>Per trasportare le informazioni verso la destinazione corretta viene utilizzato l’indirizzo <em>MAC</em> di destinazione.</p>
</section><section>
<h3 id="tcpip-livello-rete">TCP/IP: Livello Rete</h3>
<p>Si occupa di: <em>inoltro</em> (<em>forwarding</em>) e <em>instradamento</em> (<em>routing</em>) corretto di un pacchetto verso l’host di destinazione, collocato in una rete differente.</p>
<p>L’inoltro è l’operazione per la quale viene ricevuto un pacchetto su una porta e viene ritrasmesso su un’altra.
L’instradamento invece si occupa di determinare il percorso migliore per raggiungere la destinazione.
Queste operazioni sono svolte dai <em>Router</em> e dagli <em>Switch di livello 3</em>.</p>
<p>Il protocollo <em>IP</em> (<em>Internet Protocol</em>) appartiene a questo livello, esso definisce non solo il formato dei messaggi che vengono trasmessi, ma anche l’indirizzo IP a livello di rete dell’interfaccia di rete dell’host destinatario di un certo messaggio.
<strong>Questo significa che un pc connesso a più reti avrà più indirizzi IP</strong>.</p>
<br>
<br>
<p>I pacchetti che transitano in questo livello di rete sono chiamati <em>datagrammi</em>.</p>
</section><section>
<h3 id="indirizzi-ip-v4">Indirizzi IP (v4)</h3>
<p>Al contrario degli indirizzi a livello di collegamento (MAC), gli indirizzi IP seguono una struttura gerarchica.</p>
<p>Gli indirizzi hanno una lunghezza di <em>32 bit</em> e si compongono di due parti:</p>
<ul>
<li>Una di <em>rete</em> di lunghezza variabile a partire dai bit a sinistra.</li>
<li>Una di <em>host</em> con i bit rimanenti.</li>
</ul>
<p>La parte di rete assume lo stesso valore per tutti gli host appartenenti alla stessa rete (ad esempio una LAN).
I dispositivi di una LAN quindi assumeranno uno degli ip appartenenti al blocco di indirizzi fissato dalla parte di rete (<em>sottorete</em>): tale blocco si chiama <em>prefisso</em>.</p>
<p>Gli indirizzi ip sono scritti in notazione decimale per ognuno dei 4 byte, intervallati da un punto, ad esempio: <strong>128.208.2.151</strong>.</p>
<p>I prefissi sono indicati fornendo l’indirizzo IP più basso del blocco di indirizzi e la dimensione bel blocco, intesa come numero di bit a partire da sinistra che lo identificano.
Per convenzione, la grandezza del blocco è scritta dopo l’indirizzo IP separata da uno slash ("/").</p>
<p>La lunghezza del prefisso non è altro che una <em>maschera</em> di bit che consente di estrarre l’indirizzo della rete dato un qualsiasi indirizzo ip con l’operazione di AND logico.</p>
</section><section>
<h3 id="maschera-di-rete">Maschera di rete</h3>
<img src="../images/subnetmask.webp" width="100%">
</section><section>
<h3 id="esercizio-1">ESERCIZIO 1</h3>
<h4 id="quante-sottoreti-ci-sono-in-questa-topologia">Quante sottoreti ci sono in questa topologia?</h4>
<div class="text-center">
<img src="../images/esercizioreti1.png">
<p><small> Fonte: Reti di calcolatori - Sesta Edizione - A. S. Tanenbaum et.al.  </small>
</p>
</div>
</section><section>
<h3 id="esercizio-1-1">ESERCIZIO 1</h3>
<h4 id="quante-sottoreti-ci-sono-in-questa-topologia-1">Quante sottoreti ci sono in questa topologia?</h4>
<div class="text-center">
<img src="../images/esercizioreti2.png">
<p><small> Fonte: Reti di calcolatori - Sesta Edizione - A. S. Tanenbaum et.al.  </small>
</p>
</div>
</section><section>
<h3 id="esercizio-2">ESERCIZIO 2</h3>
<h4 id="qual-è-lindirizzo-che-identifica-ciascuna-sottorete-presente">Qual è l’indirizzo che identifica ciascuna sottorete presente?</h4>
<div class="text-center">
<img src="../images/esercizioreti1.png">
<p><small> Fonte: Reti di calcolatori - Sesta Edizione - A. S. Tanenbaum et.al.  </small>
</p>
</div>
</section><section>
<h3 id="esercizio-2-1">ESERCIZIO 2</h3>


<span class="fragment ">
  <p>Partiamo da una sottorete, composta dagli indirizzi IP: $ 223.1.1.1, 223.1.1.2, 223.1.1.3, 223.1.1.4 $</p>
<p><strong>Qual è la parte di indirizzo che determina la sottorete?</strong></p>

</span>



<span class="fragment ">
  <p>$ 223.1.1.X $</p>

</span>



<span class="fragment ">
  <p><strong>Quale maschera di rete consente di identificare questa sottorete?</strong></p>

</span>



<span class="fragment ">
  <p>$ 255.255.255.0 $</p>
<p>Ovvero, <strong>24 bit</strong>.</p>

</span>



<span class="fragment ">
  <p>La rappresentazione della sottorete, di conseguenza sarà: $ 223.1.1.0/24 $</p>
<p>Lo stesso ragionamento si applica per le altre sottoreti.</p>

</span>

</section><section>
<h3 id="esercizio-2-2">Esercizio 2</h3>
<div class="text-center">
<img src="../images/esercizioreti3.png">
<p><small> Fonte: Reti di calcolatori - Sesta Edizione - A. S. Tanenbaum et.al.  </small>
</p>
</div>
</section><section>
<h3 id="indirizzi-ip-v4-1">Indirizzi IP (v4)</h3>
<div class="text-center">
<p>$$ 2^{32} = 4294967296 \approx ~4,3 bil $$</p>
</div>
<p>Negli anni ‘80, quando è stato ideato il protocollo, si penso’ fosse un numero più che sufficiente di indirizzi.</p>


<span class="fragment ">
  <p><strong>Spoiler: non sono bastati.</strong></p>
<p>La soluzione è quella di transitare verso l’utilizzo dell’aggiornato protocollo <em>IPv6</em>, la cui adozione è più lenta del previsto e ci vorranno anni prima di mandare in pensione IPv4.</p>

</span>

</section><section>
<h3 id="nat">NAT</h3>
<p>Gli indirizzi IP sono distribuiti da un ente no-profit chiamato <em>ICANN</em> (<em>Internet Corporation for Assigned Names and Numbers</em>).
ICANN ha affidato la gestione di blocchi di indirizzi a enti regionali, che distribuiscono con parsimonia gli indirizzi gli ISP e alle aziende.</p>
<p>Una tecnica per poter utilizzare con parsimonia gli indirizzi IP è il <em>NAT</em> (<em>Network Address Translation</em>).
Ogni dispositivo connesso ad una rete locale riceve un indirizzo IP unico, valido solamente all’interno della rete locale.</p>
<p>Quando un dispositivo comunica verso l’esterno, il suo indirizzo ip viene tradotto dal NAT in quello pubblico assegnato dall’ISP.
Nel momento in cui viene inziata questa connessione, il NAT memorizza quale sorgente (della rete interna) e quale destinazione stanno comunicando, in modo da poter restituire alla sorgente la risposta ottenuta.</p>
<p>Sono consentiti solamente tre intervalli di indirizzi in una rete NAT:</p>
<ul>
<li><strong>192.168.0.0/16</strong> (65.536 host)</li>
<li><strong>172.16.0.0/12</strong> (1.048.576 host)</li>
<li><strong>10.0.0.0/8</strong> (16.777.216 host)</li>
</ul>
</section><section>
<h3 id="nat-1">NAT</h3>
<div class="text-center">
<img src="../images/NAT.png" width="50%">
<p><small> Fonte: Reti di calcolatori - Sesta Edizione - A. S. Tanenbaum et.al.  </small>
</p>
</div>


<span class="fragment ">
  <p><strong>Ma… non manca qualcosa?</strong></p>

</span>



<span class="fragment ">
  <p>Utilizzando il NAT <strong>non</strong> è possibile iniziare una comunicazione dall’esterno verso una macchina all’interno della rete locale.</p>
<p>Esistono tool per farlo, chiamati <em>NAT traversal</em>, che non vedremo in questo corso.</p>

</span>

</section><section>
<h3 id="tcpip-livello-trasporto">TCP/IP: Livello Trasporto</h3>
<p>Si occupa di trasportare i messaggi provenienti dal livello applicazione verso destinazione.</p>
<p>I principali protocolli appartenenti a questo livello sono:</p>
<ul>
<li><em>Transmission Control Protocol</em> o <em>TCP</em>: Fornisce un servizio <em>orientato alla connessione</em> al livello applicazione. TCP consente di garantire che il messaggio arrivi a destinazione e controllo del traffico dati e di congestione della rete. Per farlo suddivide il messaggio in segmenti più corti.</li>
<li><em>User Datagram Protocol</em> o <em>UDP</em>: Fornisce un servizio <em>senza connessione</em>, non fornisce garanzie che il messaggio arrivi a destinazione, non controlla il traffico dei dati e nemmeno la congestione della rete. Siccome non fornisce questi servizi, è un protocollo <em>veloce</em> e infatti viene adoperato in applicazioni critiche in termini di tempo: <em>gaming online</em>, <em>streaming video</em>, …</li>
</ul>
<br>
<br>
<p>I pacchetti che transitano in questo livello di rete sono chiamati <em>segmenti</em>.</p>
</section><section>
<h3 id="tcpip-livello-applicazione">TCP/IP: Livello Applicazione</h3>
<p>Contiene tutti i protocolli utilizzati dalle applicazioni sugli host per comunicare tra loro.</p>
<p>Fanno parte di questo livello:</p>
<ul>
<li><em>Hypertext Transfer Protocol</em> o <em>HTTP</em>: Utilizzato per il trasferimento di pagine web.</li>
<li><em>Simple Mail Transfer Protocol</em> o <em>SMTP</em>: Utilizato per il trasferimento di messaggi e-mail.</li>
<li><em>File Transfer Protocol</em> o <em>FTP</em>: Consente il trasferimento dei dati tra due hosts.</li>
<li><em>Dynamic Host Configuration Protocol</em> o <em>DHCP</em>: Protocollo che consente di assegnare in automatico un indirizzo IP ad un host.</li>
<li><em>Domain Name System</em> o <em>DNS</em>: Si occupa dell’assegnazione di nomi di dominio “user friendly” a indirizzi ip.</li>
<li><em>Network Time Protocol</em> o <em>NTP</em>: Protocollo che si occupa della sincronizzazione dell’orologio del computer.</li>
</ul>
<br>
<br>
<p>I pacchetti che transitano in questo livello di rete sono chiamati <em>messaggi</em>.</p>
</section><section>
<div class="multiCol">
<div class="col">
<h3 id="dhcp">DHCP</h3>
<p>È un protocollo molto utile per gli amministratori di rete perchè consente di evitare la configurazione manuale di ogni dispositivo che vuole accedere ad una rete.
DHCP, infatti, assegna un indirizzo IP a fronte di una richiesta.
Si tratta di un protocollo client-server, quindi di livello applicativo, che però configura l’interfaccia di rete del dispositivo, quindi la sua collocazione sullo stack TCP/IP varia in base alla fonte.</p>
</div>
<div class="col text-center">
<img src="../images/DHCP.png" width="100%x">
<p><small> Fonte: Computer Networking: A top-down approach - Kurose, Ross </small>
</p>
</div>
</div>
</section><section>
<div class="multiCol">
<div class="col">
<h3 id="dhcp-1">DHCP</h3>
<p>Si compone di 4 fasi:</p>
<ol>
<li><em>DHCP Server discovery</em>: Un dispositivo si connette alla rete e manda un messaggio DHCP broadcast a tutti i dispositivi nella sottorete.</li>
<li><em>DHCP Server offer</em>: Il server DHCP riceve il messaggio di discovery e manda anch’esso in broadcast una proposta di IP.</li>
<li><em>DHCP Request</em>: Il client sceglie una delle offerte ricevute dal server DHCP e lo comunica al server.</li>
<li><em>DHCP Ack</em>: Il server DHCP conferma l’assegnazione.</li>
</ol>
</div>
<div class="col text-center">
<img src="../images/DHCP.png" width="100%x">
<p><small> Fonte: Computer Networking: A top-down approach - Kurose, Ross </small>
</p>
</div>
</div>
</section><section>
<h3 id="dns">DNS</h3>
<p>Gli host che offrono servizi possiedono un IP pubblicamente accessibile.</p>
<p>È complesso ricordare l’IP di ciascun sito web che si intende visitare, per questo motivo esistono gli <em>hostname</em> (come <em><a href="https://www.google.com">www.google.com</a></em>).</p>
<p>Il compito del servizio <em>DNS</em> è quello di risolvere l’indirizzo IP di un determinato hostname.</p>
<div class="text-center">
<img src="../images/dns.webp" width="100%">
  <small> 
<p><a href="https://gcore.com/learning/dns-records-explained/">Fonte</a></p>
  </small>

</div>
</section><section>
<h3 id="dns-1">DNS</h3>
<p>In realtà, <em>hostname</em> è una definizione generica. Un <em>Fully Qualified Domain Name</em> (<em>FQDN</em>) è il termine non ambiguo che identifica l’hostname destinazione che voglio contattare.</p>
<div class="text-center">
<img src="../images/hostname-domain.webp" width="100%">
  <small> 
<p><a href="https://www.scaleway.com/en/docs/network/domains-and-dns/concepts/">Fonte</a></p>
  </small>

</div>
</section><section>
<h3 id="dns-2">DNS</h3>
<div class="multiCol">
<div class="col">
<p>Un <em>FQDN</em> ha una <em>struttura gerarchica</em>, che riflette l’infrattuttura del servizio DNS.</p>
<p>Per fornire un servizio adeguato al numero di richieste, esistono oltre 400 root server dislocati in tutto il mondo.
Un elevato numero di repliche del servizio esiste anche per i top level domain.</p>
<p>DNS offre anche un servizio di <em>load balancing</em>, ovvero, per gli hostname a cui sono associati più server (quindi più indirizzi IP) per gestire le richieste, restituisce un IP differente per bilanciare il numero di richieste ad ogni host finale.</p>
</div>
<div class="col text-center">
<img src="../images/DNS-hierarchy.png" width="100%x">
<p><small> Fonte: Computer Networking: A top-down approach - Kurose, Ross </small>
</p>
</div>
</div>
</section><section>
<h3 id="ntp">NTP</h3>
<p>L’<em>NTP</em> time server fornisce meccanismi di protocollo fondamentali, necessari per sincronizzare l’ora di diversi sistemi con una precisione esatta al nanosecondo.
Questo protocollo contiene anche dettagli sull’accuratezza e sulle probabili fonti d’errore dell’ora del sistema locale, oltre che sulle proprietà dell’orologio di riferimento.</p>
<p>Per il processo di sincronizzazione NTP utilizza il <em>tempo coordinato universale</em> (<em>UTC</em>) adottato dai singoli client e server secondo un sistema gerarchico.</p>
<p>Come DNS, anche NTP presenta una struttura gerarchica, basata sulla presenza di <em>orologi atomici</em> sparsi in tutto il mondo.
L’orologio atomico è un tipo di orologio in cui la base del tempo è determinata dalla frequenza di risonanza di un atomo, che genera un segnale periodico di frequenza estremamente stabile e affidabile.</p>
</section><section>
<div class="multiCol">
<div class="col">
<h3 id="ntp-1">NTP</h3>
<p>Nell’infrastruttura NTP ci sono server appartenenti al primo strato che sincronizzano il proprio tempo direttamente con gli orologi universali.</p>
<p>I server del secondo strato sincronizzano l’ora con i server appartenenti al primo livello, e così via, fino ad arrivare agli utenti finali.</p>
</div>
<div class="col text-center">
<img src="../images/NTP.png" width="100%">
  <small> 
<p><a href="https://it.wikipedia.org/wiki/Network_Time_Protocol">Fonte</a></p>
  </small>

</div>
</div>
</section><section>
<div class="multiCol">
<div class="col">
<h3 id="iso-osi">ISO OSI</h3>
<p>Lo stack di protocolli TCP/IP non è l’unico esistente, negli anni ‘70 la International Organization of Standardisation (<em>ISO</em>) ha proposto uno stack composto da 7 livelli, chiamato <em>Open Systems Interconnection</em> (<em>OSI</em>).</p>
<p>Questo protocollo è stato proposto quando ancora TCP/IP era agli albori, quindi ha preso piede nella didattica e ancora oggi molti documenti fanno riferimento a questo stack.</p>
<p>Lo stack ISO OSI estende la proposta TCP/IP con due layer aggiuntivi:</p>
<ul>
<li><em>Presentazione</em>: Ha il ruolo di “tradurre” il contenuto di messaggi scambiati tra due applicazioni. Fanno parte di questo layer protocolli di <em>cifratura</em> e <em>compressione</em>.</li>
<li><em>Sessione</em>: Ha il ruolo di sincronizzare e delimitare temporalmente il traffico.</li>
</ul>
</div>
<div class="col text-center">
<img src="../images/isoosi.svg" width="50%/">
</div>
</div>
</section><section>
<div class="multiCol">
<div class="col">
<p><strong>Perchè questi layer non sono presenti nello stack TCP/IP? Non servono?</strong></p>


<span class="fragment ">
  <p>Per il protocollo TCP/IP l’implementazione di questi protocolli è a <em>discrezione dell’utente</em>.
Questo significa che se è necessaria, verrà implementata direttamente nel livello di applicazione.</p>

</span>

</div>
<div class="col text-center">
<img src="../images/comparison-internet-stack.svg" width="70%/">
</div>
</div>
</section><section>
<h3 id="networking-in-linux">Networking in Linux</h3>
<p>Il networking di un sistema Linux si basa sulla configurazione delle <em>interfacce</em>.</p>
<p>Linux supporta diversi tipi di interfacce, dove le più comuni sono quelle fisiche, che tratteremo in questo modulo.</p>
<p>Esistono anche interfacce di rete virtuali (<em>VLAN</em>) e interfacce <em>bridge</em> che possono essere configurate per scopi particolari, come ad esempio la virtualizzazione.</p>
</section><section>
<h3 id="comando-ip">Comando <code>ip</code></h3>
<br>
<h4 id="ip-link-list"><code>ip link list</code></h4>
<p>Consente di visualizzare la lista delle interfacce di rete configurate all’interno della macchina, insieme al loro <em>stato</em>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> ip link list
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">2: wlo1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP mode DORMANT group default qlen 1000
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    link/ether f4:d1:08:a5:11:bc brd ff:ff:ff:ff:ff:ff
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    altname wlp0s20f3
</span></span></span></code></pre></div><p>Le parentesi angolari danno informazioni immediate riguardo alle interfacce che sto analizzando:</p>
<ul>
<li><em>UP</em>: Significa che l’interfaccia è abilitata</li>
<li><em>DOWN</em>: Significa che l’interfaccia <strong>non</strong> è abilitata</li>
<li><em>LOWER_UP</em>: Significa che il collegamento dell’interfaccia è attivo</li>
<li><em>NO_CARRIER</em>: Significa che l’interfaccia è abilitata, ma non ha nessun collegamento</li>
</ul>
<p>Un’altra informazione importante visibile in questo output è l’indirizzo <em>MAC</em> associato a ciascuna interfaccia.</p>
</section><section>
<h3 id="comando-ip-1">Comando <code>ip</code></h3>
<br>
<h4 id="ip-addr-list"><code>ip addr list</code></h4>
<p>Oltre a mostrare le informazioni legate allo stato delle interfacce di rete disponibili, mostra quali sono gli IP (v4 e v6) associati a tali interfacce.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> ip addr list
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    inet 127.0.0.1/8 scope host lo
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">       valid_lft forever preferred_lft forever
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    inet6 ::1/128 scope host noprefixroute 
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">       valid_lft forever preferred_lft forever
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">2: wlo1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    link/ether f4:d1:08:a5:11:bc brd ff:ff:ff:ff:ff:ff
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    altname wlp0s20f3
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    inet 172.20.10.5/28 brd 172.20.10.15 scope global dynamic noprefixroute wlo1
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">       valid_lft 86133sec preferred_lft 86133sec
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    inet6 fe80::2171:37c:1573:7e67/64 scope link noprefixroute 
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">       valid_lft forever preferred_lft forever
</span></span></span></code></pre></div></section><section>
<h3 id="interfaccia-di-loopback">Interfaccia di loopback</h3>
<p>È una scheda di rete virtuale, sempre presente e sempre <em>UP</em>, anche se il pc non è connesso ad internet, che consente di gestire una porzione di traffico senza passare dalla scheda di rete.</p>
<p>Nelle reti di computer, l’interfaccia di loopback permette la comunicazione tra processi, ma esclusivamente tra processi che sono eseguiti nella stessa macchina.</p>
<p>Un esempio tipico di utilizzo è quello in cui si deve testare il funzionamento di un server web, realizzando una connessione con un client eseguito sulla stessa macchina su cui è eseguito anche il server.</p>
</section><section>
<h3 id="abilitaredisabilitare-una-interfaccia">Abilitare/Disabilitare una interfaccia</h3>
<h4 id="ip-link-set-interface-status"><code>ip link set &lt;interface&gt; &lt;status&gt;</code></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> ip link list wlo1
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">2: wlo1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP mode DORMANT group default qlen 1000
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    link/ether f4:d1:08:a5:11:bc brd ff:ff:ff:ff:ff:ff
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    altname wlp0s20f3
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#8f5902">$</span> ip link <span style="color:#204a87">set</span> wlo1 down
</span></span><span style="display:flex;"><span><span style="color:#8f5902">$</span> ip link list wlo1
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">2: wlo1: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noqueue state DOWN mode DORMANT group default qlen 1000
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    link/ether f4:d1:08:a5:11:bc brd ff:ff:ff:ff:ff:ff
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    altname wlp0s20f3
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#8f5902">$</span> ip link <span style="color:#204a87">set</span> wlo1 up
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">2: wlo1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP mode DORMANT group default qlen 1000
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    link/ether f4:d1:08:a5:11:bc brd ff:ff:ff:ff:ff:ff
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    altname wlp0s20f3
</span></span></span></code></pre></div><p>L’assenza del <em>NO_CARRIER</em> quando l’interfaccia è <em>DOWN</em> mi consente si sapere che l’interfaccia è <em>amministrativamente</em> disabilitata, e non è un problema di collegamento.</p>
</section><section>
<h3 id="assegnare-un-ip-ad-una-interfaccia-di-rete">Assegnare un IP ad una interfaccia di rete</h3>
<h4 id="ip-addr-add-ipsubnet_mask-dev-interface"><code>ip addr add &lt;ip&gt;/&lt;subnet_mask&gt; dev &lt;interface&gt;</code></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> ip addr list wlo1
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">2: wlo1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    link/ether f4:d1:08:a5:11:bc brd ff:ff:ff:ff:ff:ff
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    altname wlp0s20f3
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    inet 172.20.10.5/28 brd 172.20.10.15 scope global dynamic noprefixroute wlo1
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">       valid_lft 86085sec preferred_lft 86085sec
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    inet6 fe80::2171:37c:1573:7e67/64 scope link noprefixroute 
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">       valid_lft forever preferred_lft forever
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#8f5902">$</span> ip addr add 172.20.10.6/28 dev wlo1
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">2: wlo1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    link/ether f4:d1:08:a5:11:bc brd ff:ff:ff:ff:ff:ff
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    altname wlp0s20f3
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    inet 172.20.10.5/28 brd 172.20.10.15 scope global dynamic noprefixroute wlo1
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">       valid_lft 86019sec preferred_lft 86019sec
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    inet 172.20.10.6/28 scope global secondary wlo1
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">       valid_lft forever preferred_lft forever
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    inet6 fe80::2171:37c:1573:7e67/64 scope link noprefixroute 
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">       valid_lft forever preferred_lft forever
</span></span></span></code></pre></div><p>Siccome la mia interfaccia aveva già assegnato un indirizzo, il comando eseguito non cancella quello precedente, ma aggiunge semplicemente un IP alternativo a quello principale. Per rimuoverlo posso utilizzare il comando <code>ip addr del 172.20.10.6/28 dev wlo1</code>.</p>
</section><section>
<h3 id="come-rendere-le-configurazioni-permanenti">Come rendere le configurazioni permanenti</h3>
<p>Tutto ciò che viene eseguito con il comando <code>ip</code> in un terminale non è <em>persistente</em>.
Questo significa che al riavvio della macchina tutte le modifiche saranno eliminate.</p>
<p>Storicamente nei sistemi <em>Ubuntu</em> una configurazione di rete persistente al riavvio richiedeva la modifica manuale del file <code>/etc/network/interfaces</code>, il cui contenuto descrive tutte le informazioni necessarie per configurare le interfacce di rete.</p>
<p>I sistemi più recenti, però, hanno sostituito la gestione della rete con nuovi strumenti come:</p>
<ul>
<li><em>NetworkManager</em> per installazioni linux Desktop</li>
<li><em>systemd-networkd</em> per installazioni linux Server</li>
</ul>
</section><section>
<h4 id="etcnetworkinterfaces">/etc/network/interfaces</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">#</span> The loopback interface.
</span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#000;font-style:italic">auto lo
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">iface lo inet loopback
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"> 
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#8f5902">#</span> An example ethernet card setup: <span style="color:#ce5c00;font-weight:bold">(</span>broadcast and gateway are optional<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#000;font-style:italic">auto eth0
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">iface eth0 inet static
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">     address 192.168.0.42
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">     network 192.168.0.0
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">     netmask 255.255.255.0
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">     broadcast 192.168.0.255
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">     gateway 192.168.0.1
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#000;font-style:italic">auto eth1
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">iface eth1 inet dhcp
</span></span></span></code></pre></div></section><section>
<h3 id="tabella-di-instradamento-degli-ip-nel-mio-host">Tabella di instradamento degli ip nel mio host</h3>
<h4 id="ip-route-list"><code>ip route list</code></h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> ip route list
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">default via 172.20.10.1 dev wlo1 proto dhcp src 172.20.10.5 metric 600 
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">172.20.10.0/28 dev wlo1 proto kernel scope link src 172.20.10.5 metric 600 
</span></span></span></code></pre></div><p>So che il mio <em>default gateway</em> è <code>172.20.10.1</code>, che è l’indiririzzo del router nella mia sotto-rete che mi consente la comunicazione verso l’esterno.</p>
<p>La comunicazione di default avverrà con l’interfaccia di rete <code>wlo1</code>, al quale è associato l’ip <code>172.20.10.5</code>.</p>
<p>Tutte le comunicazioni per la sottorete <code>172.20.10.0/28</code> passeranno per l’interfaccia di rete <code>wlo1</code>.</p>
</section><section>
<h3 id="wpa_supplicant">wpa_supplicant</h3>
<p>Per connettersi ad una rete WiFi (<em>IEEE 802.11X</em>) è necessario utilizzare il protocollo di sicurezza <em>WPA</em>.</p>
<p><em>wpa supplicant</em> è un demone di sistema che consente di gestire proprio questo tipo di connesioni.</p>
<h4 id="iwlist-scan"><code>iwlist scan</code></h4>
<p>Consente di effettuare una scansione per individuare gli <code>SSID</code> raggiungibili dalla connessione WiFi del mio computer.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> iwlist scan
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">...
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">lo        Interface doesn't support scanning.
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#000;font-style:italic">wlo1      Scan completed :
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">          Cell 01 - Address: 16:41:A5:B5:E5:0F
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">                    Channel:6
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">                    Frequency:2.437 GHz (Channel 6)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">                    Quality=63/70  Signal level=-47 dBm  
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">                    Encryption key:on
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">                    ESSID:"iPhone di Martina"
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">                    Bit Rates:1 Mb/s; 2 Mb/s; 5.5 Mb/s; 11 Mb/s; 18 Mb/s
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">                              24 Mb/s; 36 Mb/s; 54 Mb/s
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">                    Bit Rates:6 Mb/s; 9 Mb/s; 12 Mb/s; 48 Mb/s
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">[...]
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"> Cell 03 - Address: D8:44:89:27:7F:42
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">                    Channel:1
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">                    Frequency:2.412 GHz (Channel 1)
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">                    Quality=45/70  Signal level=-65 dBm  
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">                    Encryption key:on
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">                    ESSID:"anitvam-home"
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">                    Bit Rates:1 Mb/s; 2 Mb/s; 5.5 Mb/s; 11 Mb/s; 9 Mb/s
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">                              18 Mb/s; 36 Mb/s; 54 Mb/s
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">                    Bit Rates:6 Mb/s; 12 Mb/s; 24 Mb/s; 48 Mb/s
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#000;font-style:italic">[...]
</span></span></span></code></pre></div></section><section>
<h3 id="generazione-di-un-file-di-autenticazione">Generazione di un file di autenticazione</h3>
<h4 id="wpa_passphrase-ssid-password--wpaconf"><code>wpa_passphrase &lt;SSID&gt; &lt;PASSWORD&gt; &gt; wpa.conf</code></h4>
<h4 id="wpa_passphrase-ssid--wpaconf"><code>wpa_passphrase &lt;SSID&gt; &gt; wpa.conf</code></h4>
<p>Consentono di generare un file di configurazione chiamato <code>wpa.conf</code> che conterrà l’SSID dell’access point al quale voglio connettermi e la mia password hashata.</p>
<p>È possibile omettere la password per poterla inserire da standard input</p>
<h3 id="associazione-ad-una-rete-wifi">Associazione ad una rete WiFi</h3>
<h4 id="wpa_supplicant--iinterfaccia--cpercorso_assolutowpaconf"><code>wpa_supplicant -i&lt;interfaccia&gt; -c&lt;percorso_assoluto&gt;/wpa.conf</code></h4>
<p>Il processo non viene fatto di default in background, per farlo bisogna passare il flag <code>-B</code></p>
<h3 id="ottenere-un-indirizzo-ip-tramite-dhcp">Ottenere un indirizzo ip tramite DHCP</h3>
<h4 id="dhclient-wlo1"><code>dhclient wlo1</code></h4>
<p>Ottengo così un indirizzo ip sfruttando DHCP installato nel mio router.</p>
</section><section>
<h3 id="devo-fare-tutte-le-volte-questi-passaggi">Devo fare tutte le volte questi passaggi?</h3>
<p>In realtà no, perchè queste configurazioni di basso livello sono già fornite all’interno dei tool di più alto livello citati in precedenza, ovvero <em>NetworkManager</em> e <em>systemd-networkd</em>.</p>
<div class="multiCol">
<div class="col">
<h4 id="systemd-networkd">Systemd-networkd</h4>
<p>Questo tool è fornito solitamente con le distribuzioni server, si configura interamente attraverso file di configurazione che risiedono nel file <code>/etc/systemd/network</code>.</p>
</div>
<div class="col">
<h4 id="network-manager">Network Manager</h4>
<p>Tool fornito nelle distribuzioni Desktop di Linux.</p>
<p>Tipicamente si configura utilizzando direttamente l’interfaccia grafica, però esso fornisce una utility da linea di comando che consente di effettuare le operazioni di <code>ip</code>, <code>wpa_cli</code> e <code>dhclient</code> sopra citate.</p>
</div>
</div>
</section><section>
<h3 id="come-testare-la-mia-connettività-di-rete">Come testare la mia connettività di rete</h3>
<h4 id="ping"><code>ping</code> <host></host></h4>
<p>L’utility <code>ping</code> manda a raffica dei pacchetti all’host destinazione.
Quando la destinazione riceve un messaggio di ping risponde al mittente, e il comando tiene traccia del tempo che il specifico messaggio ha impiegato per andare a destinazione e tornare indietro.</p>
<p>Il monitoraggio del tempo di transito di questo pacchetto consente di verificare l’efficienza della comunicazione di rete.</p>
<p>Posso specificare come host un indirizzo ip o un hostname.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> ping google.com
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">ping google.com
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">PING google.com (142.251.209.46) 56(84) bytes of data.
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">64 bytes from mil04s51-in-f14.1e100.net (142.251.209.46): icmp_seq=1 ttl=116 time=29.3 ms
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">64 bytes from mil04s51-in-f14.1e100.net (142.251.209.46): icmp_seq=2 ttl=116 time=70.7 ms
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">64 bytes from mil04s51-in-f14.1e100.net (142.251.209.46): icmp_seq=3 ttl=116 time=67.6 ms
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">64 bytes from mil04s51-in-f14.1e100.net (142.251.209.46): icmp_seq=4 ttl=116 time=64.1 ms
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">[...]
</span></span></span></code></pre></div></section><section>
<h3 id="altri-strumenti-di-diagnostica-utili">Altri strumenti di diagnostica utili</h3>
<div class="multiCol">
<div class="col">
<h4 id="traceroute"><code>traceroute</code></h4>
<p>Fornisce una mappa del percorso compiuto dai dati su Internet dall’origine alla destinazione, mostrando il percorso compiuto dal pacchetto.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> traceroute 8.8.8.8
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">1  _gateway (172.20.10.1)  6.582 ms  6.438 ms  6.377 ms
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">2  * * *
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">3  192.168.9.46 (192.168.9.46)  72.874 ms * *
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">4  192.168.255.19 (192.168.255.19)  73.690 ms  73.645 ms  73.601 ms
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">5  ppp176-paris2.isdnet.net (194.149.182.176)  80.137 ms * *
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">6  * * 194.149.189.58 (194.149.189.58)  70.836 ms
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">7  * * *
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">8  * * *
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">9  dns.google (8.8.8.8)  74.866 ms  76.534 ms  37.069 ms
</span></span></span></code></pre></div></div>
<div class="col">
<h4 id="nslookup"><code>nslookup</code></h4>
<p>Consente di effettuare delle query DNS per ottenere l’indirizzo ip associato ad un hostname.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span><span style="color:#8f5902">$</span> nslookup google.com
</span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Server:         172.20.10.1
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Address:        172.20.10.1#53
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#000;font-style:italic">Non-authoritative answer:
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Name:   google.com
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Address: 142.251.209.46
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Name:   google.com
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">Address: 2a00:1450:4002:414::200e
</span></span></span></code></pre></div><p>L’indirizzo verso il quale rivolgo le mie query DNS in questo caso è il gateway appartenente alla mia rete locale, che a sua volta instraderà il messaggio verso il DNS di destinazione.</p>
<p>È possibile modificare il server a cui porre le query modificando il file di sistema <code>/etc/resolv.conf</code></p>
</div>
</div>
<p>È possibile configurare una tabella di risoluzione di ip locale, che il pc consulta prima di inoltrare la richiesta al DNS server, utile in caso si hanno degli ip noti nella rete locale ai quali si vuole associare un hostname valido solo nel mio pc.
Per farlo posso aggiungere delle entry al file <code>/etc/hosts</code>.</p>
</section>

  


</div>
      

    </div>
<script type="text/javascript" src="/course-scm-linux-base/reveal-hugo/object-assign.js"></script>

<a href="/course-scm-linux-base/reveal-js/dist/print/" id="print-location" style="display: none;"></a>

<script type="application/json" id="reveal-hugo-site-params">{"custom_theme":"custom-theme.scss","custom_theme_compile":true,"custom_theme_options":{"enablesourcemap":true,"targetpath":"css/custom-theme.css"},"height":"1080","highlight_theme":"solarized-dark","history":true,"mermaid":[{}],"slide_number":true,"theme":"league","transition":"slide","transition_speed":"fast","width":"1920"}</script>
<script type="application/json" id="reveal-hugo-page-params">{"custom_theme":"martina-theme.scss","custom_theme_compile":true}</script>

<script src="/course-scm-linux-base/reveal-js/dist/reveal.js"></script>


  
  
  <script type="text/javascript" src="/course-scm-linux-base/reveal-js/plugin/markdown/markdown.js"></script>
  
  <script type="text/javascript" src="/course-scm-linux-base/reveal-js/plugin/highlight/highlight.js"></script>
  
  <script type="text/javascript" src="/course-scm-linux-base/reveal-js/plugin/zoom/zoom.js"></script>
  
  <script type="text/javascript" src="/course-scm-linux-base/reveal-js/plugin/notes/notes.js"></script>
  
  
  <script type="text/javascript" src="/course-scm-linux-base/reveal-js/plugin/notes/notes.js"></script>




<script type="text/javascript">
  
  
  function camelize(map) {
    if (map) {
      Object.keys(map).forEach(function(k) {
        newK = k.replace(/(\_\w)/g, function(m) { return m[1].toUpperCase() });
        if (newK != k) {
          map[newK] = map[k];
          delete map[k];
        }
      });
    }
    return map;
  }

  var revealHugoDefaults = { center: true, controls: true, history: true, progress: true, transition: "slide" };

  var revealHugoPlugins = {
    plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
   };
  var revealHugoSiteParams = JSON.parse(document.getElementById('reveal-hugo-site-params').innerHTML);
  var revealHugoPageParams = JSON.parse(document.getElementById('reveal-hugo-page-params').innerHTML);
  
  var options = Object.assign({},
    camelize(revealHugoDefaults),
    camelize(revealHugoSiteParams),
    camelize(revealHugoPageParams),
    camelize(revealHugoPlugins));
  Reveal.initialize(options);
</script>







  
  

  
  

  
  

  
  

  
  





    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
</script>

<script type="text/javascript" id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>

<script>
  if (/.*?(\?|&)print-pdf/.test(window.location.toString())) {
      var ytVideos = document.getElementsByTagName("iframe")
      for (let i = 0; i < ytVideos.length; i++) {
          var videoFrame = ytVideos[i]
          var isYouTube = /^https?:\/\/(www.)youtube\.com\/.*/.test(videoFrame.src)
          if (isYouTube) {
              console.log(`Removing ${videoFrame.src}`)
              var parent = videoFrame.parentElement
              videoFrame.remove()
              var p = document.createElement('p')
              p.append(
                  document.createTextNode(
                      "There was an embedded video here, but it is disabled in the printed version of the slides."
                  )
              )
              p.append(document.createElement('br'))
              p.append(
                  document.createTextNode(
                      `Visit instead ${
                          videoFrame.src
                      } or ${
                          videoFrame.src.replace(
                              /(^https?:\/\/(www.)youtube\.com)\/(embed\/)(\w+).*/,
                              "https://www.youtube.com/watch?v=$4"
                          )
                      }`
                  )
              )
              parent.appendChild(p)
          }
      }
  }
</script>


    
  

</body></html>